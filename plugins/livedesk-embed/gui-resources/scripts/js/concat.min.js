define("utils/class",[],function(){var c=!1,f=function(){};f.extend=function(d,b){function a(){if(!c&&(this._constructor||this._construct))try{return(this._construct||this._constructor).apply(this,arguments)}catch(a){console.error(a)}}c=!0;var e=new this;c=!1;for(var f in d)e[f]=d[f];a.prototype=e;a.prototype.constructor=a;a.extend=arguments.callee;return a};return f});
define("gizmo",["jquery","utils/class"],function(c,f){function d(a,c){var b;if("undefined"==typeof a||"undefined"==typeof c)return!0;for(b in c)if("undefined"==typeof a[b])return!0;for(b in a)if("undefined"==typeof c[b])return!0;for(b in c)if(c[b])switch(typeof c[b]){case "object":if(d(c[b],a[b]))return!0;break;case "function":if("undefined"==typeof a[b]||c[b].toString()!=a[b].toString())return!0;break;default:if(c[b]!=a[b])return!0}else if(a[b])return!0;return!1}var b=function(){},a=function(){},
e=function(){this.items={}},h=function(){},k=f.extend({_construct:function(a){this.data=!this.data?{root:""}:this.data;switch(c.type(a)){case "string":this.data.url=a;break;case "array":this.data.url=a[0];void 0!==a[1]&&(this.data.xfilter=url[0]);break;case "object":this.data.url=a.url,void 0!==a.xfilter&&(this.data.xfilter=a.xfilter)}return this},xfilter:function(){this.data.xfilter=1<arguments.length?c.makeArray(arguments).join(","):c.isArray(arguments[0])?arguments[0].join(","):arguments[0];return this},
root:function(a){this.data.root=a;return this},get:function(){return this.data.root+this.data.url},order:function(a,c){this.data.order=c+"\x3d"+a;return this},filter:function(a,c){this.data.filter=a+"\x3d"+c;return this},decorate:function(a){this.data.url=a.replace(/(%s)/g,this.data.url)},options:function(){var a={};this.data.xfilter&&(a.headers={"X-Filter":this.data.xfilter});return a}}),g={request:function(a){var b=this,e=function(e,l,d){c.support.cors=!0;a instanceof k?(l=c.extend(!0,{},l,b.options,
d,{data:e},a.options()),e=c.ajax(b.href(a.get()),l)):(l=c.extend(!0,{},l,b.options,d,{data:e}),e=c.ajax(b.href(a),l));b.reset();l.fail&&e.fail(l.fail);l.done&&e.done(l.done);l.always&&e.always(l.always);return e};return{read:function(a){return e({},b.readOptions,a)},update:function(a,c){return e(a,b.updateOptions,c)},insert:function(a,c){return e(a,b.insertOptions,c)},remove:function(a){return e({},b.removeOptions,a)}}},href:function(a){return a},reset:c.noop,options:{},readOptions:{dataType:"json",
type:"get",headers:{Accept:"text/json"}},updateOptions:{type:"post",headers:{"X-HTTP-Method-Override":"PUT"}},insertOptions:{dataType:"json",type:"post"},removeOptions:{type:"get",headers:{"X-HTTP-Method-Override":"DELETE"}}},j=0;a.prototype={_changed:!1,_new:!1,defaults:{},data:{},_construct:function(a,b){this._clientId=j++;this.data={};this.parseHash(a);this._new=!0;var e=this.pushUnique?this.pushUnique():this;e._forDelete=!1;e.clearChangeset();e._clientHash=null;b&&"object"==typeof b&&c.extend(e,
b);"object"==typeof a&&e._parse(a);e._setExpiration();e.isDeleted()?e._remove():c.isEmptyObject(e.changeset)?e.clearChangeset().triggerHandler("read"):e.triggerHandler("update",e.changeset).clearChangeset();return e},syncAdapter:g,feed:function(c,b,e){c={};e=e?e:this.data;for(var d in e)c[d]=e[d]instanceof a?b?e[d].feed(b):e[d].relationHash()||e[d].hash():e[d];return c},sync:function(a,e){var b=this,d=c.Deferred(),f=function(){return b.syncAdapter.request.apply(b.syncAdapter,arguments)};this.hash();
b.triggerHandler("sync");if(this._forDelete)return f(a||this.href).remove().done(function(){b._remove()});if(this._clientHash)return f(a||this.href).insert(this.feed()).done(function(a){b._changed=!1;b._parse(a);b._uniq&&b._uniq.replace(b._clientHash,b.hash(),b);b._clientHash=null;b.triggerHandler("insert").Class.triggerHandler("insert",b)});this._changed?c.isEmptyObject(this.changeset)||(d=this.href&&f(this.href).update(e?this.feed():this.feed("json",!1,this.changeset)).done(function(){b.triggerHandler("update",
b.changeset).clearChangeset()})):(!a||!a.force)&&this.exTime&&this.exTime>new Date?b.isDeleted()||b.triggerHandler("update"):d=this.href&&f(this.href).read(a).done(function(a){b._parse(a);b.isDeleted()?b._remove():c.isEmptyObject(b.changeset)?b.clearChangeset().triggerHandler("read"):b.triggerHandler("update",b.changeset).clearChangeset()});this._setExpiration();return d},_setExpiration:function(){this.exTime=new Date;this.exTime.setSeconds(this.exTime.getSeconds()+5)},_remove:function(){this.triggerHandler("delete");
this._uniq&&this._uniq.remove(this.hash())},remove:function(){this._forDelete=!0;return this},isDeleted:function(){return this._forDelete},modelDataBuild:function(a){return a},parse:function(a){return a},_parse:function(b){b=b instanceof a?b.data:this.parse(b);if(!b._parsed){for(var e in b){if(this.defaults[e])switch(!0){case "function"===typeof this.defaults[e]&&void 0===this.data[e]:var f=this.modelDataBuild(new this.defaults[e](b[e]));!this._new&&(f!=this.data[e]&&!(f instanceof h))&&(this.changeset[e]=
f);this.data[e]=f;!b[e].href&&this.data[e].relationHash&&this.data[e].relationHash(b[e]);continue;case c.isArray(this.defaults[e]):this.data[e]=this.modelDataBuild(new h(this.defaults[e][0],b[e].href));delete this.data[e];continue;case this.defaults[e]instanceof h:case this.defaults[e]instanceof a:this.data[e]=this.defaults[e];continue}else this._new||("object"===c.type(b[e])?d(this.data[e],b[e])&&(this.changeset[e]=b[e]):this.data[e]!=b[e]&&(this.changeset[e]=b[e]));"object"===c.type(b[e])&&"object"===
c.type(this.data[e])?c.extend(!0,this.data[e],b[e]):this.data[e]=b[e]}this._new=!1;b._parsed=!0}},parseHash:function(b){if(b instanceof a)return this;"string"==typeof b?this.href=b:b&&void 0!==b.href?(this.href=b.href,delete b.href):b&&(void 0!==b.id&&void 0!==this.url)&&(this.href=this.url+b.id);return this},isChanged:function(){return!c.isEmptyObject(this.changeset)},clearChangeset:function(){this._changed=!1;this.changeset={};return this},get:function(a){return this.data[a]},set:function(a,b,e){var d=
{};"string"===c.type(a)?d[a]=b:(d=a,e=b);e=c.extend({},{silent:!1},e);this.clearChangeset()._parse(d);this._changed=!0;c.isEmptyObject(this.changeset)||e.silent||this.triggerHandler("set",this.changeset);return this},_getClientHash:function(){this._clientHash||(this._clientHash="mcid-"+String(this._clientId));return this._clientHash},hash:function(){!this.href&&this.data.href&&(this.href=this.data.href);return this.data.href||this.href||this._getClientHash()},relationHash:function(a){a&&(this.data.Id=
a);return this.data.Id},off:function(a,b){c(this).off(a,b);return this},on:function(a,b,e){if(void 0===e)c(this).off(a,b),c(this).on(a,b);else c(this).on(a,function(){b.apply(e,arguments)});return this},one:function(a,b,e){if(void 0===e)c(this).off(a,b),c(this).one(a,b);else c(this).one(a,function(){b.apply(e,arguments)});return this},trigger:function(a,b){c(this).trigger(a,b);return this},triggerHandler:function(a,b){c(this).triggerHandler(a,b);return this}};e.prototype={items:{},garbageTime:1500,
refresh:function(a){a._exTime||(a._exTime=new Date);a._exTime.setTime(a._exTime.getTime()+this.garbageTime)},set:function(a,b){var e=this;c(b).on("sync get get-prop set-prop",function(){e.refresh(this)});e.refresh(b);this.items[a]||(this.items[a]=b);return this.items[a]},replace:function(a,b,e){delete this.items[a];return this.set(b,e)},garbage:function(){for(var a in this.items)this.items[a]._exTime&&this.items[a]._exTime<new Date&&(c(this.items[a]).triggerHandler("garbage"),delete this.items[a])},
remove:function(a){delete this.items[a]}};var m=a.options={},o,p;a.extend=o=function(a,e){var d;d=f.extend.call(this,a);d.extend=o;d.prototype.Class=d;d.on=function(a,b,e){c(d).on(a,function(){b.apply(e,arguments)});return d};d.off=function(a,b){c(d).off(a,b);return d};d.triggerHandler=function(a,b){c(d).triggerHandler(a,b)};e&&e.register&&(b[e.register]=d,delete e.register);d.prototype.options=c.extend({},e);return d};h.prototype={_list:[],_events:{},getList:function(){return this._list},count:function(){return this._list.length},
_construct:function(){this.model||(this.model=a);this._list=[];this._events={};this.desynced=!0;var b=buildOptions=function(){void 0},e;for(e in arguments)switch(c.type(arguments[e])){case "function":this.model=arguments[e];break;case "string":this.href=arguments[e];break;case "array":b=function(a){return function(){this._list=this._parse(a)}}(arguments[e]);break;case "object":buildOptions=function(a){return function(){this.options=a;a.href&&(this.href=a.href)}}(arguments[e])}buildOptions.call(this);
b.call(this);m=c.extend({},{init:!0},this.options);m.init&&this.init.apply(this,arguments)},init:function(){},get:function(a){var b=c.Deferred(),e=this;searchKey=function(){for(var c=0;c<e._list.length;c++)if(a==e._list[c].hash()||a==e._list[c].relationHash())return b.resolve(e._list[c]);b.reject()};this.desynced&&this.sync().done(function(){b.resolve(searchKey())})?b:searchKey();return b},remove:function(a){for(var b in this._list)if(a==this._list[b].hash()||a==this._list[b].relationHash()){Array.prototype.splice.call(this._list,
b,1);break}return this},syncAdapter:g,setHref:function(a){this.href=a;return this},each:function(a){c.each(this._list,a)},forwardEach:function(a,b){this._list.forEach(a,b)},reverseEach:function(a,b){for(var e=this._list.length;0<e;++e)a.call(b||this,this[e],e,this)},feed:function(a,b){var e=[],c;for(c in this._list)e[c]=this._list[c].feed(a,b);return e},sync:function(a){var b=this;return this.href&&this.syncAdapter.request.call(this.syncAdapter,this.href).read(a).done(function(a){var e=b.parseAttributes(a);
b.parse(a);list=b._parse(a);changeset=[];removeings=[];updates=[];addings=[];count=b._list.length;for(a=0;a<list.length;a++){for(var c=!1,d=0;d<count;d++)if(list[a].hash()==b._list[d].hash()){c=list[a];break}if(c)if(b.hasEvent("updates")&&updates.push(c),b.isCollectionDeleted(c)&&(b._list.splice(a,1),b.hasEvent("removeings")&&removeings.push(c)),c.isDeleted())c._remove();else if(c.isChanged())changeset.push(c);else c.on("delete",function(){b.remove(this.hash())}).on("garbage",function(){this.desynced=
!0});else list[a].isDeleted()?b.hasEvent("updates")&&updates.push(list[a]):(b._list.push(list[a]),changeset.push(list[a]),b.hasEvent("addings")&&addings.push(list[a]))}b.desynced=!1;0===count?b.triggerHandler("read",[b._list,e]):(updates.length&&b.hasEvent("updates")&&b.triggerHandler("updates",[updates,e]),addings.length&&b.hasEvent("addings")&&b.triggerHandler("addings",[addings,e]),removeings.length&&b.hasEvent("removeings")&&b.triggerHandler("removeings",[removeings,e]),b.triggerHandler("update",
[changeset,e]))})},isCollectionDeleted:function(){return!1},modelDataBuild:function(a){return a},parseAttributes:function(a){return a},parse:function(a){var b=a;if(!Array.isArray(a))for(i in a)if(c.isArray(a[i])){b=a[i];break}return b},_parse:function(a){a=this.parse(a);for(var b=[],e=0,c=a.length;e<c;e++)b.push(this.modelDataBuild(new this.model(a[e])));return b},insert:function(b){this.desynced=!1;b instanceof a||(b=this.modelDataBuild(new this.model(b)));this._list.push(b);b.hash();return b.sync(this.href)},
off:function(a,b){c(this).off(a,b);for(var e=a.split(" "),d=0,f=e.length;d<f;d++)delete this._events[e[d]];return this},on:function(a,b,e){if(void 0===e)c(this).off(a,b),c(this).on(a,b);else c(this).on(a,function(){b.apply(e,arguments)});a=a.split(" ");for(var d=0,f=a.length;d<f;d++)this._events[a[d]]=!0;return this},one:function(a,b,e){if(void 0===e)c(this).off(a,b),c(this).one(a,b);else c(this).one(a,function(){b.apply(e,arguments)});return this},trigger:function(a,b){c(this).trigger(a,b);return this},
triggerHandler:function(a,b){c(this).triggerHandler(a,b);return this},hasEvent:function(a){return"undefined"===c.type(this._events[a])?!1:this._events[a]}};h.extend=p=function(a,e){var d;d=f.extend.call(this,a);d.extend=p;e&&e.register&&(b[e.register]=d,delete e.register);d.prototype.options=c.extend({},e);return d};var q=0,r=f.extend({getProperty:function(a){return!this[a]?null:"function"===typeof this[a]?this[a]():this[a]}}).extend({tagName:"div",attributes:{className:"",id:""},namespace:"view",
_constructor:function(a,b){c.extend(this,a);this._clientId=q++;b=c.extend({},{init:!0,events:!0,ensure:!0},b);b.ensure&&this._ensureElement();b.init&&this.init.apply(this,arguments);b.events&&this.resetEvents()},_ensureElement:function(){var a=this.attributes.className,b=this.attributes.id,e="";c(this.el).length?this.el=c(this.el):("string"===c.type(this.el)&&("."==this.el[0]&&(a+=this.el.substr(0,1)),"#"==this.el[0]&&(b=this.el.substr(0,1))),e="\x3c"+this.tagName,""!==a&&(e=e+' class\x3d"'+a+'"'),
""!==b&&(e=e+' id\x3d"'+b+'"'),e=e+"\x3e\x3c/"+this.tagName+"\x3e",this.el=c(e))},init:function(){return this},resetEvents:function(){this.undelegateEvents();this.delegateEvents()},delegateEvents:function(a){if(a||(a=this.getProperty("events")))for(var b in a){var e=a[b],d;for(d in e){var f=e[d];if("string"===typeof f&&c.isFunction(this[f]))c(this.el).on(this.getEvent(d),b,this[f].bind(this))}}},undelegateEvents:function(){c(this.el).off(this.getNamespace());return this},getEvent:function(a){return a+
this.getNamespace()},getNamespace:function(){return"."+this.getProperty("namespace")},render:function(){this.delegateEvents();return this},remove:function(){c(this.el).remove();this.destroy();return this},destroy:function(){this.model&&this.model.trigger("destroy");this.collection&&this.collection.trigger("destroy");return this},checkElement:function(){return void 0===this.el?!1:void 0!==this.el.selector&&""!=this.el.selector?1===c(this.el.selector).length:c(this.el).is(":visible")},setElement:function(a){this.undelegateEvents();
a=c(a);var b=this.el.data();this.el.replaceWith(a);this.el=a;this.el.data(b);this.delegateEvents();return this},resetElement:function(a){this.el=c(a);this._ensureElement();this.delegateEvents()}});return{Model:a,Collection:h,Sync:g,UniqueContainer:e,View:r,Url:k,Register:b}});
define("gizmo/superdesk",["jquery","gizmo"],function(c,f){var d=c.extend({},f.Sync,{reset:function(){try{delete this.options.headers["X-Filter"],this.options.data={}}catch(a){}}}),b=function(){AuthApp.success=function(){};AuthApp.require.apply(this,arguments)},a=c.extend({},d,{options:{fail:function(e){401==e.status&&b.apply(a,arguments);404==e.status&&ErrorApp.require.apply(this,arguments)}},href:function(a){return-1===a.indexOf("my/")?a.replace("resources/","resources/my/"):a}}),e=function(){this.syncAdapter.options.headers||
(this.syncAdapter.options.headers={});this._xfilter=1<arguments.length?c.makeArray(arguments).join(","):c.isArray(arguments[0])?arguments[0].join(","):arguments[0];this.syncAdapter.options.headers["X-Filter"]=this._xfilter;this.syncAdapter.options.headers["X-Format-DateTime"]="yyyy-MM-ddTHH:mm:ss'Z'";return this},h=function(a,b){void 0===a?delete this.syncAdapter.options.data[b]:(void 0===this.syncAdapter.options.data&&(this.syncAdapter.options.data={}),this.syncAdapter.options.data[b]=a);return this},
k=function(a,b){void 0===b&&(b="CId");return h.call(this,a,b+".since")},g=function(a,b){void 0===b&&(b="CId");return h.call(this,a,b+".until")},j=function(a,b){void 0===b&&(b="CId");return h.call(this,a,b+".start")},m=function(a,b){void 0===b&&(b="CId");return h.call(this,a,b+".end")},o=f.Model.extend({isDeleted:function(){return this._forDelete||this.data.DeletedOn},syncAdapter:d,xfilter:e,since:k,until:g,start:j,end:m}),p=function(b){"object"===typeof b&&(b.syncAdapter=a);b.modelDataBuild=function(a){return p(a)};
return b},q=f.Model.extend({syncAdapter:a,xfilter:e,since:k,until:g}),r=f.Collection.extend({xfilter:e,since:k,until:g,start:j,end:m,asc:function(a){return h.call(this,a,"asc")},desc:function(a){return h.call(this,a,"desc")},limit:function(a){return h.call(this,a,"limit")},offset:function(a){return h.call(this,a,"offset")},syncAdapter:d}),e=f.Collection.extend({xfilter:e,since:k,until:g,start:j,end:m,syncAdapter:a});o.extend=function(){var a=f.Model.extend.apply(this,arguments),b=new f.UniqueContainer;
c.extend(a.prototype,{_uniq:b,pushUnique:function(){return b.set(this.hash(),this)}},arguments[0]);return a};return{Auth:p,Model:o,AuthModel:q,Collection:r,AuthCollection:e,Sync:d,AuthSync:a,View:f.View,Url:f.Url,Register:f.Register}});
define("gizmo/view-events",["jquery","gizmo/superdesk"],function(c,f){return c.extend({View:f.View.extend({off:function(d,b){c(this).off(d,b);return this},on:function(d,b,a){if(void 0===a)c(this).off(d,b),c(this).on(d,b);else c(this).on(d,function(){b.apply(a,arguments)});return this},one:function(d,b,a){if(void 0===a)c(this).off(d,b),c(this).one(d,b);else c(this).one(d,function(){b.apply(a,arguments)});return this},trigger:function(d,b){c(this).trigger(d,b);return this},triggerHandler:function(d,
b){c(this).triggerHandler(d,b);return this}})},f)});
define("utils/twitter",[],function(){return{link:{anchor:function(c){return c.replace(/[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z]+:\/\/[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_]+\.[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_:%&\?\/.=]+/g,function(c){c=c.link(c);return c=c.replace('href\x3d"','target\x3d"_blanka" href\x3d"')})},user:function(c){return c.replace(/[@]+[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_]+/g,function(c){var d=c.replace("@",
"");c=c.link("http://twitter.com/"+d);return c=c.replace('href\x3d"','target\x3d"_blankb" onclick\x3d"loadProfile(\''+d+'\');return(false);"  href\x3d"')})},tag:function(c){return c.replace(/[#]+[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_]+/g,function(c){var d=c.replace("#","%23");c=c.link("http://twitter.com/search?q\x3d"+d);return c=c.replace('href\x3d"','target\x3d"_blank" href\x3d"')})},all:function(c){c=this.anchor(c);c=this.user(c);return c=this.tag(c)}}}});
define("utils/utf8",[],function(){return{encode:function(c){return unescape(encodeURIComponent(c))},decode:function(c){return decodeURIComponent(escape(c))}}});
define("dust/dust-helpers",["dust/dust","jquery","utils/twitter","jquery/i18n","jquery/utils"],function(c,f,d){function b(a){return function(b){try{return b=JSON.parse(b),b.annotation[a]}catch(c){}return""}}var a=function(a,b,c,d){if(f.isDefined(d.param1)){var j=[],m;f.each(d,function(c,d){"function"===typeof d&&(val="",a.tap(function(a){val+=a;return""}).render(d,b).untap(),d=val);m=parseInt(c.slice(5))-1;if(isNaN(m)&&window.console)return window.console.log("Invalid parameter "+c+" given!"),[];
j[m]=d});return j}f.each(d,function(c,f){"function"===typeof f&&(val="",a.tap(function(a){val+=a;return""}).render(f,b).untap(),d[c]=val)});return d};c.helpers={i18n:function(b,c,d,g){msgid=g.msgid;msgid_plural=g.msgid_plural;n=g.n;domain=g.domain;msgctxt=g.msgctxt;g&&g.msgid?(delete g.msgid,b.write(f.i18n.dcnpgettext(domain,msgctxt,msgid,msgid_plural,n).format(a(b,c,d,g)))):window.console&&window.console.log("No expression given!");return b},sep:function(a,b,c){return b.stack.index===b.stack.of-
1?a:c.block(a,b)},idx:function(a,b,c){return c.block(a,b.push(b.stack.index))},"if":function(a,b,c,d){var f=d.cond;if(d&&d.cond){"function"===typeof f&&(f="",a.tap(function(a){f+=a;return""}).render(d.cond,b).untap(),""===f&&(f=!1));if(eval(f))return a.render(c.block,b);if(c["else"])return a.render(c["else"],b)}else window.console&&window.console.log("No expression given!");return a}};c.filters.t=function(a){return f("\x3cdiv\x3e"+a+"\x3c/div\x3e").text()};c.filters.twitter_all=function(a){return d.link.all(a)};
c.filters.twitter_annotation_before=b(0);c.filters.twitter_annotation_after=b(1);return c});define("dust/core",["dust/dust","dust/dust-helpers"],function(c){return c});
define("jquery/tmpl",["jquery","dust/core"],function(c,f){c.fn.extend({tmpl:function(d,b,a){if(""!==d)return"#"===d[0]&&(d=d.slice(1)),c.isFunction(b)&&(a=b),this.each(function(){$that=c(this);c.tmpl(d,b,function(b,d){b?window.console&&window.console.log(b):$that.html(d);c.isFunction(a)&&a.apply($that)})})}});c.extend({tmpl:function(c,b,a){f.render(c,b,a)},tmplFn:function(c){return f.compileFn(c)}})});
define("utils/encode_url",[],function(){encodeURL=function(c){return encodeURIComponent(c).replace(/'/g,"%27").replace(/~/g,"%7E").replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29")}});
define("utils/extend",[],function(){Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;++c)a.call(b||this,this[c],c,this)});Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},f=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};
d.prototype=this.prototype;f.prototype=new d;return f});String.prototype.trim||(String.prototype.trim=function(){for(var a=this.replace(/^\s\s*/,""),b=/\s/,c=a.length;b.test(a.charAt(--c)););return a.slice(0,c+1)});var c=Date,f=c.parse,d=[1,4,5,6,7,10,11];c.parse=function(a){var b,h=0;if(b=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(a)){a=0;for(var k;k=d[a];++a)b[k]=+b[k]||0;b[2]=(+b[2]||1)-1;b[3]=+b[3]||
1;"Z"!==b[8]&&void 0!==b[9]&&(h=60*b[10]+b[11],"+"===b[9]&&(h=0-h));b=c.UTC(b[1],b[2],b[3],b[4],b[5]+h,b[6],b[7])}else b=f?f(a):NaN;return b};if(!Date.prototype.toISOString){var b=function(a){a=String(a);1===a.length&&(a="0"+a);return a};Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,
5)+"Z"}}String.prototype.trunc=function(a,b){var c=this.length>a,d=c?this.substr(0,a-1):this,d=b&&c?d.substr(0,d.lastIndexOf(" ")):d;return c?d+"...":d}});
define("tmpl",["jquery","dust/compiler","dust/i18n_parse","jquery/xdomainrequest"],function(c,f,d){var b=function(){throw Error("Environment unsupported.");},a={};if("undefined"!==typeof window&&window.navigator&&window.document||"undefined"!==typeof importScripts)b=function(a,b){c.ajax({url:a,error:function(a,c){console.log("err");"parsererror"==c&&b(a.responseText)},success:function(a){b(a)}})};return{pluginBuilder:"tmpl-build",write:function(b,c,d){a.hasOwnProperty(c)&&d.asModule(b+"!"+c,a[c])},
load:function(c,h,k,g){var j=h.toUrl(c+".dust");b(j,function(b){b=d(b);try{b="define(['dust'],function(dust){"+f.compile(b,c)+" return {render: function(context, callback) {return dust.render('"+c+"', context, callback)}}})"}catch(h){throw h.message="In "+j+", "+h.message,h;}g.isBuild&&(a[c]=b);g.isBuild||(b+="\r\n//@ sourceURL\x3d"+j);k.fromText("tmpl!"+c,b)})}}});
define("livedesk-embed/views/post","jquery gizmo/superdesk jquery/tmpl jquery/utils utils/encode_url tmpl!theme/item/base tmpl!theme/item/item tmpl!theme/item/annotated tmpl!theme/item/social-share tmpl!theme/item/posttype/normal tmpl!theme/item/posttype/image tmpl!theme/item/posttype/wrapup tmpl!theme/item/posttype/quote tmpl!theme/item/posttype/link tmpl!theme/item/posttype/advertisement tmpl!theme/item/source/advertisement tmpl!theme/item/source/google tmpl!theme/item/source/twitter tmpl!theme/item/source/facebook tmpl!theme/item/source/youtube tmpl!theme/item/source/flickr tmpl!theme/item/source/soundcloud tmpl!theme/item/source/instagram".split(" "),function(c,
f){return f.View.extend({init:function(){var c=this;c.xfilter="PublishedOn, DeletedOn, Order, Id, CId, Content, CreatedOn, Type, AuthorName, Author.Source.Name, Author.Source.Id, IsModified, AuthorPerson.EMail, AuthorPerson.FirstName, AuthorPerson.LastName, AuthorPerson.Id, Meta, IsPublished, Creator.FullName";c.model.on("read update",function(b,a){c._parent.model.get("PostPublished").isCollectionDeleted(c.model)||c.render(b,a)}).on("delete",c.remove,c).xfilter(c.xfilter).sync()},remove:function(){this._parent.removeOne(this);
this.el.remove();this.model.off("read update delete");return this},toggleWrap:function(d,b){"boolean"!=typeof b&&(b=!1);this._toggleWrap(c(d).closest("li").first(),b)},_toggleWrap:function(c){c.hasClass("open")?(c.removeClass("open").addClass("closed"),c.nextUntil(".wrapup,#loading-more").hide()):(c.removeClass("closed").addClass("open"),c.nextUntil(".wrapup,#loading-more").show())},render:function(d,b){var a=this;b=a.model.feed();var e=parseFloat(a.model.get("Order")),f;!isNaN(a.order)&&e!=a.order&&
a._parent.orderOne(a);b.HashIdentifier=a._parent.hashIdentifier;b.Meta&&(b.Meta=JSON.parse(b.Meta));b.Meta&&b.Meta.annotation&&(null===b.Meta.annotation[1]&&(b.Meta.annotation=b.Meta.annotation[0],b.Meta.annotation=c.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],b.Meta.annotation)),"string"!==typeof b.Meta.annotation?b.Meta.annotation[0]?(e=b.Meta.annotation,b.Meta.annotation={before:c.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],e[0]),after:c.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],e[1])}):b.Meta.annotation={before:c.trimTag(["\x3cbr\x3e",
"\x3cbr /\x3e"],b.Meta.annotation.before),after:c.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],b.Meta.annotation.after)}:b.Meta.annotation=c.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],b.Meta.annotation));f=a._parent.hashIdentifier+b.Order;-1===a._parent.location.indexOf("?")?b.permalink=a._parent.location+"?"+f:-1!==a._parent.location.indexOf(a._parent.hashIdentifier)?(e=RegExp(a._parent.hashIdentifier+"[^\x26]*"),b.permalink=a._parent.location.replace(e,f)):b.permalink=a._parent.location+"\x26"+f;"internal"!==
b.Author.Source.Name?b.item="source/"+b.Author.Source.Name:b.Type&&(b.item="posttype/"+b.Type.Key);b.CreatedOn&&(e=new Date(Date.parse(b.CreatedOn)),b.CreatedOn=e.format(_("mm/dd/yyyy HH:MM o")),b.CreatedOnISO=e.getTime());b.Content&&(b.Content=b.Content.replace(livedesk.server(),livedesk.FrontendServer));c.tmpl("theme/item/item",b,function(e,d){if(e)console.error(e);else{a.setElement(d);var f=c('input[data-type\x3d"permalink"]',a.el);c('a[rel\x3d"bookmark"]',a.el).on(a.getEvent("click"),function(b){b.preventDefault();
"visible"===f.css("visibility")?f.css("visibility","hidden"):(f.css("visibility","visible"),f.trigger(a.getEvent("focus")),c(".result-header .share-box",a.el).fadeOut("fast"))});f.on(a.getEvent("focus")+" "+a.getEvent("click"),function(){c(this).select()});c(".big-toggle",a.el).off(a.getEvent("click")).on(a.getEvent("click"),function(){a.toggleWrap(this,!0)});c(".result-header",a.el).parent().hover(function(){},function(){c(this).find(".share-box").fadeOut(100);c('input[data-type\x3d"permalink"]',
a.el).css("visibility","hidden")});c(".sf-share",a.el).on(a.getEvent("click"),function(e){e.preventDefault();var d=c(this);if("yes"!=d.attr("data-added")){e=encodeURL(a._parent.model.get("Title"));var f=encodeURL(b.permalink),h=c(".result-content img:first",a.el).attr("src"),g=encodeURL(c(".result-content .result-text:last",a.el).text()),h="http://pinterest.com/pin/create/button/?url\x3d"+f+"\x26media\x3d"+h+"\x26description\x3d"+e,k="https://plus.google.com/share?url\x3d"+f+"\x26t\x3d",j="mailto:?to\x3d\x26subject\x3d"+
_("Check out this Live Blog")+"\x26body\x3d"+f,l="http://www.facebook.com/sharer.php?s\x3d100",l=l+("\x26p[title]\x3d"+e),l=l+("\x26p[summary]\x3d"+g),l=l+("\x26p[url]\x3d"+f),u=0;c(".result-content img",a.el).each(function(){var a=c(this).attr("src");l+="\x26p[images]["+u+"]\x3d"+a;u++});e={fbclick:"$.socialShareWindow('"+l+"',400,570); return false;",twtclick:"$.socialShareWindow('http://twitter.com/home?status\x3d"+_("Now reading ")+e+": "+f+"',400,570); return false;",linclick:"$.socialShareWindow('http://www.linkedin.com/shareArticle?mini\x3dtrue\x26url\x3d"+
f+"\x26title\x3d"+e+"\x26summary\x3d"+g+"', 400, 570); return false;",pinclick:"$.socialShareWindow('"+h+"', 400, 700); return false;",gglclick:"$.socialShareWindow('"+k+"', 400, 570); return false;",emailclick:"$.socialShareWindow('"+j+"', 1024, 768); return false;",emailurl:j};c.tmpl("theme/item/social-share",e,function(a,b){d.after(b);d.attr("data-added","yes")})}c('input[data-type\x3d"permalink"]',a.el).css("visibility","hidden");c(this).next(".share-box").toggle()})}});setTimeout(function(){})}})});
define("utils/date-format",["jquery","jquery/i18n"],function(){var c,f=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,b=/[^-+\dA-Z]/g,a=function(a,b){a=String(a);for(b=b||2;a.length<b;)a="0"+a;return a};c=function(e,h,k){1==arguments.length&&("[object String]"==Object.prototype.toString.call(e)&&!/\d/.test(e))&&(h=e,e=void 0);e=e?new Date(e):new Date;
if(isNaN(e))throw SyntaxError("invalid date");h=String(c.masks[h]||h||c.masks["default"]);"UTC:"==h.slice(0,4)&&(h=h.slice(4),k=!0);var g=k?"getUTC":"get",j=e[g+"Date"](),m=e[g+"Day"](),o=e[g+"Month"](),p=e[g+"FullYear"](),q=e[g+"Hours"](),r=e[g+"Minutes"](),t=e[g+"Seconds"](),g=e[g+"Milliseconds"](),s=k?0:e.getTimezoneOffset(),l={d:j,dd:a(j),ddd:c.i18n.dayNames[m],dddd:c.i18n.dayNames[m+7],m:o+1,mm:a(o+1),mmm:c.i18n.monthNames[o],mmmm:c.i18n.monthNames[o+12],yy:String(p).slice(2),yyyy:p,h:q%12||
12,hh:a(q%12||12),H:q,HH:a(q),M:r,MM:a(r),s:t,ss:a(t),l:a(g,3),L:a(99<g?Math.round(g/10):g),t:12>q?"a":"p",tt:12>q?"am":"pm",T:12>q?"A":"P",TT:12>q?"AM":"PM",Z:k?"UTC":(String(e).match(d)||[""]).pop().replace(b,""),o:(0<s?"-":"+")+a(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][3<j%10?0:(10!=j%100-j%10)*j%10]};return h.replace(f,function(a){return a in l?l[a]:a.slice(1,a.length-1)})};c.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",
longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};c.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};
Date.prototype.format=function(a,b){return c(this,a,b)};return c});
define("utils/ie-polyfill",[],function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(c){if(void 0===this||null===this)throw new TypeError;var f=Object(this),d=f.length>>>0;if(0===d)return-1;var b=0;0<arguments.length&&(b=Number(arguments[1]),b!==b?b=0:0!==b&&(Infinity!==b&&-Infinity!==b)&&(b=(0<b||-1)*Math.floor(Math.abs(b))));if(b>=d)return-1;for(b=0<=b?b:Math.max(d-Math.abs(b),0);b<d;b++)if(b in f&&f[b]===c)return b;return-1})});
define("livedesk-embed/dispatcher",["jquery"],function(c){var f=function(){};f.prototype={on:function(d,b){c(this).on(d,function(a,c){b.call(c)})},triggerHandler:function(d,b){c(this).triggerHandler(d,[b])}};c.dispatcher=new f});define("window",[],function(){return window});define("document",[],function(){return document});
define("jquery/scrollspy",["jquery","window","document"],function(c,f){c.fn.extend({scrollspy:function(d){d=c.extend({},{min:0,max:0,mode:"vertical",buffer:0,container:f,onEnter:d.onEnter?d.onEnter:[],onLeave:d.onLeave?d.onLeave:[],onTick:d.onTick?d.onTick:[]},d);return this.each(function(){var b=this,a=d,e=c(a.container),f=a.mode,k=a.buffer,g=leaves=0,j=!1;e.bind("scroll",function(){var d={top:c(this).scrollTop(),left:c(this).scrollLeft()},o="vertical"==f?d.top+k:d.left+k,p=a.max,q=a.min;c.isFunction(a.max)&&
(p=a.max());c.isFunction(a.min)&&(q=a.min());0==p&&(p="vertical"==f?e.height():e.outerWidth()+c(b).outerWidth());if(o>=q&&o<=p){if(!j&&(j=!0,g++,c(b).trigger("scrollEnter",{position:d}),c.isFunction(a.onEnter)))a.onEnter(b,d);c(b).trigger("scrollTick",{position:d,inside:j,enters:g,leaves:leaves});if(c.isFunction(a.onTick))a.onTick(b,d,j,g,leaves)}else if(j&&(j=!1,leaves++,c(b).trigger("scrollLeave",{position:d,leaves:leaves}),c.isFunction(a.onLeave)))a.onLeave(b,d)})})}})});
define("livedesk-embed/collections/autocollection",["gizmo/superdesk"],function(c){return c.Collection.extend({_timeInterval:1E4,_idInterval:0,_stats:{},keep:!1,resetStats:function(){this._stats={limit:15,offset:0,lastCId:0,fistOrder:Infinity,total:0}},init:function(){var c=this;c.resetStats();c.model.on("publish reorder",function(d,b){c._stats.lastCId+1===parseInt(b.get("CId"))&&c._stats.lastCId++});c.on("read readauto",function(d,b,a){c._stats.offset=c._stats.limit;c._stats.total=parseInt(a.total);
a.lastCId=parseInt(a.lastCId);a.lastCId>c._stats.lastCId&&(c._stats.lastCId=a.lastCId);c.getFirstOrder(b)}).on("readauto updatesauto addingsauto removeingsauto update",function(d,b){c.getLastCid(b);c.getFirstOrder(b)}).on("addingsauto",function(d,b){c._stats.total+=b.length;c._stats.offset+=b.length}).on("removeingsauto",function(d,b){c._stats.total-=b.length;c._stats.offset-=b.length}).on("addings",function(d,b){c._stats.offset+=b.length})},destroy:function(){this.stop()},auto:function(c){var d=
this;ret=this.stop().start(c);this._idInterval=setInterval(function(){d.start(c)},this._timeInterval);return ret},start:function(c){c=c||{};c=$.extend(!0,{data:{"cId.since":this._stats.lastCId,"order.start":this._stats.fistOrder},headers:{"X-Filter":this._xfilter,"X-Format-DateTime":"yyyy-MM-ddTHH:mm:ss'Z'"}},c);0===this._stats.lastCId&&(delete c.data["cId.since"],delete c.data["order.start"]);if(!this.keep&&this.view&&!this.view.checkElement())this.stop();else return this.triggerHandler("beforeUpdate"),
this.autosync(c)},stop:function(){clearInterval(this._idInterval);return this},getFirstOrder:function(c){for(var d=0,b,a=c.length;d<a;d++)b=parseFloat(c[d].get("Order")),!isNaN(b)&&this._stats.fistOrder>b&&(this._stats.fistOrder=b)},getLastCid:function(c){for(var d=0,b,a=c.length;d<a;d++)b=parseInt(c[d].get("CId")),!isNaN(b)&&this._stats.lastCId<b&&(this._stats.lastCId=b)},autosync:function(c){var d=this;return this.href&&this.syncAdapter.request.call(this.syncAdapter,this.href).read(c).done(function(b){var a=
d.parseAttributes(b);b=d._parse(b);for(var c=[],f=[],k=[],g=[],j=d._list.length,m=0;m<b.length;m++){for(var o=!1,p=0;p<d._list.length;p++)if(b[m].hash()==d._list[p].hash()){o=b[m];break}if(o)if(d.hasEvent("updatesauto")&&k.push(o),d.isCollectionDeleted(o)&&(d._list.splice(p,1),d.hasEvent("removeingsauto")&&f.push(o)),o.isDeleted())o._remove();else if(o.isChanged())c.push(o);else o.on("delete",function(){d.remove(this.hash())}).on("garbage",function(){this.desynced=!0});else d.isCollectionDeleted(b[m])?
d.hasEvent("removeingsauto")&&d.hasEvent("removeingsauto")&&f.push(b[m]):b[m].isDeleted()?d.hasEvent("updatesauto")&&k.push(b[m]):(d._list.push(b[m]),c.push(b[m]),d.hasEvent("addingsauto")&&g.push(b[m]))}d.desynced=!1;0===j?d.triggerHandler("readauto",[d._list,a]):(k.length&&d.hasEvent("updatesauto")&&d.triggerHandler("updatesauto",[k,a]),g.length&&d.hasEvent("addingsauto")&&d.triggerHandler("addingsauto",[g,a]),f.length&&d.hasEvent("removeingsauto")&&d.triggerHandler("removeingsauto",[f,a]),d.triggerHandler("updateauto",
[c,a]))})}},{register:"AutoCollection"})});define("livedesk-embed/models/user",["gizmo/superdesk"],function(c){return c.Model.extend({},{register:"User"})});
define("livedesk-embed/models/post",["gizmo/superdesk","livedesk-embed/models/user","utils/extend"],function(c){return c.Model.extend({defaults:{Creator:c.Register.User},services:{flickr:!0,google:!0,twitter:!0,facebook:!0,youtube:!0},getClass:function(){switch(this.get("Type").Key){case "wrapup":return"wrapup";case "quote":return"quotation";case "advertisement":return"advertisement";default:return this.isService()?"service":"tw"}},isService:function(){return this.get("AuthorName")in this.services},
isQuote:function(){return"quotation"==this.getClass()},twitter:{link:{anchor:function(c){return c.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/g,function(c){c=c.link(c);return c=c.replace('href\x3d"','target\x3d"_blank" href\x3d"')})},user:function(c){return c.replace(/[@]+[A-Za-z0-9-_]+/g,function(c){var b=c.replace("@","");c=c.link("http://twitter.com/"+b);return c=c.replace('href\x3d"','target\x3d"_blank" onclick\x3d"loadProfile(\''+b+'\');return(false);"  href\x3d"')})},tag:function(c){return c.replace(/[#]+[A-Za-z0-9-_]+/g,
function(c){var b=c.replace(" #"," %23");c=c.link("http://summize.com/search?q\x3d"+b);return c=c.replace('href\x3d"','target\x3d"_blank" href\x3d"')})},all:function(c){c=this.anchor(c);c=this.user(c);return c=this.tag(c)}}}},{register:"Post"})});
define("livedesk-embed/collections/posts",["gizmo/superdesk","livedesk-embed/collections/autocollection","livedesk-embed/models/post"],function(c){return c.Register.AutoCollection.extend({parse:function(c){void 0!==c.total&&(c.total=parseInt(c.total),this.listTotal=c.total,delete c.total);return c.PostList?c.PostList:c},parseAttributes:function(c){return{lastCId:c.lastCId,offset:c.offset,offsetMore:c.offsetMore,total:c.total,limit:c.limit}},isCollectionDeleted:function(c){return"False"===c.get("IsPublished")},
model:c.Register.Post},{register:"Posts"})});define("livedesk-embed/models/blog",["gizmo/superdesk","livedesk-embed/collections/posts"],function(c){return c.Model.extend({defaults:{PostPublished:c.Register.Posts}},{register:"Blog"})});
define("jquery/xdomainrequest",["jquery"],function(c){c.support.cors=!0;var f=0,d=0;this.XDomainRequest&&c.ajaxTransport("+*",function(b){if(b.crossDomain&&b.async){b.timeout&&(b.xdrTimeout=b.timeout,delete b.timeout);var a,e;return{send:function(h,k){function g(b,e,d,f){a.onload=a.onerror=a.ontimeout=c.noop;a=void 0;k(b,e,d,f)}a=new XDomainRequest;if(b.dataType){var j="";for(i in b.headers)j+=i+"\x3d"+encodeURIComponent(b.headers[i])+"\x26";j=j.replace(/(\s+)?.$/,"");b.url=b.url+(-1===b.url.indexOf("?")?
"?":"\x26")+j}a.open(b.type,b.url);e=b.processTime?b.processTime:30*f++;a.onload=function(){setTimeout(function(){g(200,"OK",{text:a.responseText},"Content-Type: "+a.contentType);f=0},d)};d=e;a.onerror=function(){g(404,"Not Found")};b.xdrTimeout&&(a.ontimeout=function(){g(0,"timeout")},a.timeout=b.xdrTimeout);a.send(b.hasContent&&b.data||null)},abort:function(){a&&(a.onerror=c.noop(),a.abort())}}}})});
define("livedesk-embed/views/timeline","jquery gizmo/view-events livedesk-embed/views/post utils/date-format utils/ie-polyfill livedesk-embed/dispatcher jquery/tmpl jquery/scrollspy livedesk-embed/models/blog tmpl!theme/container jquery/xdomainrequest".split(" "),function(c,f,d,b){b.i18n={dayNames:_("Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday").toString().split(","),monthNames:_("Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December").toString().split(",")};
return f.View.extend({limit:6,hashIdentifier:"livedeskitem\x3d",location:"",_views:[],el:"#livedesk-root",timeInterval:1E4,events:{"#loading-more":{click:"loadingMore"},"#load-more":{click:"loadMore"}},idInterval:0,flags:{},scroll:{element:null,start:0},resetFlags:function(){this.flags={addAllPending:!1,more:!1,loadingMore:!1,atEnd:!1}},autoRender:!0,pendingAutoupdates:[],loadMore:function(){this.resetFlags();this.el.find("#liveblog-post-list").html("");i=0;for(count=this._views.length;i<count;i++)this._views[i].rendered=
!1;this._views=[];delete this.filters;var a=this.model.get("PostPublished");a._list=[];a.resetStats();a.limit(a._stats.limit).offset(a._stats.offset).auto({data:{thumbSize:"medium"}});c(this).hide()},showLiner:function(){c("#load-more").show()},loadingMore:function(){var a=this;console.log(a.flags);!a.flags.atEnd&&!a.flags.loadingMore&&(a.flags.loadingMore=!0,a.flags.more=!0,a.model.get("PostPublished"),postPublished=a.model.get("PostPublished"),a.filters&&c.each(a.filters,function(a,b){postPublished[a].apply(postPublished,
b)}),postPublished.xfilter(a.xfilter).limit(postPublished._stats.limit).offset(postPublished._stats.offset).sync({data:{thumbSize:"medium"}}).done(function(){var b=a.model.get("PostPublished").total;a.toggleMoreVisibility();a._views.length>=b&&(a.flags.atEnd=!0);a.flags.more=!1;a.flags.loadingMore=!1}))},more:function(){var a=this;!a.flags.atEnd&&!a.flags.more&&(a.flags.more=!0,a.model.get("PostPublished"),postPublished=a.model.get("PostPublished"),a.filters&&c.each(a.filters,function(a,b){postPublished[a].apply(postPublished,
b)}),postPublished.xfilter(a.xfilter).limit(postPublished._stats.limit).offset(postPublished._stats.offset).sync().done(function(){var b=a.model.get("PostPublished").total;a._views.length>=b&&(a.flags.atEnd=!0,c("#loading-more",a.el).hide());a.flags.more=!1}))},setIdInterval:function(a){this.idInterval=setInterval(a,this.timeInterval);return this},pause:function(){clearInterval(this.idInterval);return this},sync:function(){var a=this;this.auto().pause().setIdInterval(function(){a.auto()})},auto:function(){this.model.xfilter().sync({force:!0});
return this},ensureStatus:function(){if(this.model.get("ClosedOn")){var a=new Date(this.model.get("ClosedOn"));this.pause();this.model.get("PostPublished").stop();this.el.find("#liveblog-status-time").html(_("The liveblog coverage was stopped ")+a.format(_("mm/dd/yyyy HH:MM")))}},gotoHash:function(){if(0<location.hash.length){var a=location.hash;location.hash="";location.hash=a}},init:function(){var a=this;a.resetFlags();a._views=[];a.location=window.location.href.split("#")[0];a.rendered=!1;"string"===
c.type(a.url)&&(a.model=new f.Register.Blog(a.url.replace("my/","")));a.xfilter="PublishedOn, DeletedOn, Order, Id, CId, Content, CreatedOn, Type, AuthorName, Author.Source.Name, Author.Source.Id, IsModified, AuthorImage, AuthorPerson.EMail, AuthorPerson.FirstName, AuthorPerson.LastName, AuthorPerson.Id, Meta, IsPublished, Creator.FullName";a.model.on("read",function(){if(!a.rendered){var b,c=window.location.href.split("?"),d=a.model.get("PostPublished");d.on("read readauto",a.render,a).on("addings",
a.addAll,a).on("addingsauto",a.addAllAutoupdate,a).on("removeingsauto",a.removeAllAutoupdate,a).on("updateauto readauto",a.updateStatus,a).on("beforeUpdate",a.updateingStatus,a).xfilter(a.xfilter).limit(d._stats.limit);c[1]&&-1!==(b=c[1].indexOf(a.hashIdentifier))?(b=parseFloat(c[1].substr(b+a.hashIdentifier.length)),a.filters={end:[b,"order"]},d.one("rendered",a.showLiner,a).end(b,"order").sync({data:{thumbSize:"medium"}})):d.offset(d._stats.offset).auto({data:{thumbSize:"medium"}})}a.rendered=!0}).on("update",
function(){a.ensureStatus();a.renderBlog()});a.sync()},removeOne:function(a){var b=this._views.indexOf(a);a=this.model.get("PostPublished")._list.indexOf(a.model);-1!==b&&(this.model.get("PostPublished").total--,this._views.splice(b,1),-1!==a&&this.model.get("PostPublished")._list.splice(a,1),this.markScroll());return this},orderOne:function(a){var b=this._views.indexOf(a);a.order=parseFloat(a.model.get("Order"));-1===b&&this._views.push(a);this._views.sort(function(a,b){return b.order-a.order});
b=this._views.indexOf(a);0===b?1===this._views.length?this.el.find("#load-more").after(a.el):a.el.insertBefore(this._views[1].el):a.el.insertAfter(this._views[b-1].el);return a},addOne:function(a){var b=new d({model:a,_parent:this});a.postView=b;return this.orderOne(b)},toggleStatusCount:function(){if(0!==this.pendingAutoupdates.length){var a=this.pendingAutoupdates.length;c("#liveblog-status-count",this.el).text(ngettext("one new post","%(count)s new posts",a).format({count:a})).show()}else c("#liveblog-status-count",
this.el).hide()},removeAllAutoupdate:function(a,b){for(var c in b)"postView"in b[c]&&b[c].postView.remove();this.markScroll()},addAllAutoupdate:function(a,b){if(this.autoRender){if(b.length){for(var c=0,d=b.length;c<d;c++)this.addOne(b[c]),this.model.get("PostPublished").total++;this.markScroll()}}else 0!==b.length&&(this.pendingAutoupdates=this.pendingAutoupdates.concat(b),this.toggleStatusCount())},addAllPending:function(){if(!this.flags.addAllPending&&this.pendingAutoupdates.length){this.flags.addAllPending=
!0;for(var a=0,b=this.pendingAutoupdates.length;a<b;a++)this.addOne(this.pendingAutoupdates[a]);this.pendingAutoupdates=[];this.toggleStatusCount();this.markScroll()}this.flags.addAllPending=!1},addAll:function(a,b){var c;c=0;for(count=b.length;c<count;c++)this.addOne(b[c]);this.toggleMoreVisibility()},updateingStatus:function(){this.el.find("#liveblog-status-time").html(_("updating..."))},updateStatus:function(){var a=this,b=new Date;this.el.find("#liveblog-status").fadeOut(function(){var d='\x3ctime data-date\x3d"'+
b.getTime()+'"\x3e'+b.format(_("HH:MM"))+"\x3c/time\x3e";c(this).find("#liveblog-status-time").html(_("updated on %s").format([d])).end().fadeIn();c.dispatcher.triggerHandler("after-render",a)})},renderBlog:function(){c(this.el).find('[gimme\x3d"blog.title"]').html(this.model.get("Title")).end().find('[gimme\x3d"blog.description"]').html(this.model.get("Description"))},toggleMoreVisibility:function(){this.model.get("PostPublished")._stats.offset>=this.model.get("PostPublished")._stats.total?c("#loading-more",
this.el).hide():c("#loading-more",this.el).show()},markScroll:function(){this.scroll.element=c("#liveblog-posts :not(#load-more)",this.el).first();this.scroll.start=this.scroll.element.offset().top},render:function(){var a=this,b,d;d=a.model.get("PostPublished");a.el.tmpl("theme/container");a.renderBlog();a.ensureStatus();b=d._list;d.total=d.listTotal;a.toggleMoreVisibility();var f=b.length;a.views=[];a.renderedTotal=f;for(var f=0,g=b.length;f<g;f++)b[f].on("rendered",a.renderedOn,a),d=a.addOne(b[f]),
a.views.push(d);a.model.get("PostPublished").triggerHandler("rendered");c("#pintotop,#liveblog-status-count",a.el).on(a.getEvent("click"),function(b){b.preventDefault();c("#liveblog-posts",a.el).scrollTop(0)});a.markScroll();c("#liveblog-posts",a.el).scroll(function(){!a.flags.atEnd&&c(this).outerHeight()===c(this).get(0).scrollHeight-c(this).scrollTop()&&a.more();a.scroll.element.offset().top<a.scroll.start?(a.autoRender=!1,c("#liveblog-status",a.el).addClass("shadow")):(a.autoRender=!0,a.addAllPending(),
c("#liveblog-status",a.el).removeClass("shadow"))});c.dispatcher.triggerHandler("after-render",this)},renderedOn:function(){this.renderedTotal--;this.renderedTotal||this.closeAllButFirstWrapup()},closeAllButFirstWrapup:function(a){a=this.views;a.reverse();for(var b=0;b<a.length;b++)c(a[b].el).hasClass("wrapup")&&a[b]._toggleWrap(c(a[b].el))}})});define("livedesk-embed/plugins",function(){});