define("utils/class",[],function(){var b=!1,d=function(){};d.extend=function(d,a){function c(){if(!b&&(this._constructor||this._construct))try{return(this._construct||this._constructor).apply(this,arguments)}catch(a){console.error(a)}}b=!0;var f=new this;b=!1;for(var h in d)f[h]=d[h];c.prototype=f;c.prototype.constructor=c;c.extend=arguments.callee;return c};return d});
define("gizmo",["jquery","utils/class"],function(b,d){function e(r,a){var b;if("undefined"==typeof r||"undefined"==typeof a)return!0;for(b in a)if("undefined"==typeof r[b])return!0;for(b in r)if("undefined"==typeof a[b])return!0;for(b in a)if(a[b])switch(typeof a[b]){case "object":if(e(a[b],r[b]))return!0;break;case "function":if("undefined"==typeof r[b]||a[b].toString()!=r[b].toString())return!0;break;default:if(a[b]!=r[b])return!0}else if(r[b])return!0;return!1}var a=function(){},c=function(){},
f=function(){this.items={}},h=function(){},k=d.extend({_construct:function(a){this.data=!this.data?{root:""}:this.data;switch(b.type(a)){case "string":this.data.url=a;break;case "array":this.data.url=a[0];void 0!==a[1]&&(this.data.xfilter=url[0]);break;case "object":this.data.url=a.url,void 0!==a.xfilter&&(this.data.xfilter=a.xfilter)}return this},xfilter:function(){this.data.xfilter=1<arguments.length?b.makeArray(arguments).join(","):b.isArray(arguments[0])?arguments[0].join(","):arguments[0];return this},
root:function(a){this.data.root=a;return this},get:function(){return this.data.root+this.data.url},order:function(a,b){this.data.order=b+"\x3d"+a;return this},filter:function(a,b){this.data.filter=a+"\x3d"+b;return this},decorate:function(a){this.data.url=a.replace(/(%s)/g,this.data.url)},options:function(){var a={};this.data.xfilter&&(a.headers={"X-Filter":this.data.xfilter});return a}}),j={request:function(a){var g=this,c=function(c,m,d){b.support.cors=!0;a instanceof k?(m=b.extend(!0,{},m,g.options,
d,{data:c},a.options()),c=b.ajax(g.href(a.get()),m)):(m=b.extend(!0,{},m,g.options,d,{data:c}),c=b.ajax(g.href(a),m));g.reset();m.fail&&c.fail(m.fail);m.done&&c.done(m.done);m.always&&c.always(m.always);return c};return{read:function(a){return c({},g.readOptions,a)},update:function(a,r){return c(a,g.updateOptions,r)},insert:function(a,r){return c(a,g.insertOptions,r)},remove:function(a){return c({},g.removeOptions,a)}}},href:function(a){return a},reset:b.noop,options:{},readOptions:{dataType:"json",
type:"get",headers:{Accept:"text/json"}},updateOptions:{type:"post",headers:{"X-HTTP-Method-Override":"PUT"}},insertOptions:{dataType:"json",type:"post"},removeOptions:{type:"get",headers:{"X-HTTP-Method-Override":"DELETE"}}},p=0;c.prototype={_changed:!1,_new:!1,defaults:{},data:{},_construct:function(a,g){this._clientId=p++;this.data={};this.parseHash(a);this._new=!0;var c=this.pushUnique?this.pushUnique():this;c._forDelete=!1;c.clearChangeset();c._clientHash=null;g&&"object"==typeof g&&b.extend(c,
g);"object"==typeof a&&c._parse(a);c._setExpiration();c.isDeleted()?c._remove():b.isEmptyObject(c.changeset)?c.clearChangeset().triggerHandler("read"):c.triggerHandler("update",c.changeset).clearChangeset();return c},syncAdapter:j,feed:function(a,b,m){a={};m=m?m:this.data;for(var d in m)a[d]=m[d]instanceof c?b?m[d].feed(b):m[d].relationHash()||m[d].hash():m[d];return a},sync:function(a,c){var d=this,f=b.Deferred(),e=function(){return d.syncAdapter.request.apply(d.syncAdapter,arguments)};this.hash();
d.triggerHandler("sync");if(this._forDelete)return e(a||this.href).remove().done(function(){d._remove()});if(this._clientHash)return e(a||this.href).insert(this.feed()).done(function(a){d._changed=!1;d._parse(a);d._uniq&&d._uniq.replace(d._clientHash,d.hash(),d);d._clientHash=null;d.triggerHandler("insert").Class.triggerHandler("insert",d)});this._changed?b.isEmptyObject(this.changeset)||(f=this.href&&e(this.href).update(c?this.feed():this.feed("json",!1,this.changeset)).done(function(){d.triggerHandler("update",
d.changeset).clearChangeset()})):(!a||!a.force)&&this.exTime&&this.exTime>new Date?d.isDeleted()||d.triggerHandler("update"):f=this.href&&e(this.href).read(a).done(function(a){d._parse(a);d.isDeleted()?d._remove():b.isEmptyObject(d.changeset)?d.clearChangeset().triggerHandler("read"):d.triggerHandler("update",d.changeset).clearChangeset()});this._setExpiration();return f},_setExpiration:function(){this.exTime=new Date;this.exTime.setSeconds(this.exTime.getSeconds()+5)},_remove:function(){this.triggerHandler("delete");
this._uniq&&this._uniq.remove(this.hash())},remove:function(){this._forDelete=!0;return this},isDeleted:function(){return this._forDelete},modelDataBuild:function(a){return a},parse:function(a){return a},_parse:function(a){a=a instanceof c?a.data:this.parse(a);if(!a._parsed){for(var g in a){if(this.defaults[g])switch(!0){case "function"===typeof this.defaults[g]&&void 0===this.data[g]:var d=this.modelDataBuild(new this.defaults[g](a[g]));!this._new&&(d!=this.data[g]&&!(d instanceof h))&&(this.changeset[g]=
d);this.data[g]=d;!a[g].href&&this.data[g].relationHash&&this.data[g].relationHash(a[g]);continue;case b.isArray(this.defaults[g]):this.data[g]=this.modelDataBuild(new h(this.defaults[g][0],a[g].href));delete this.data[g];continue;case this.defaults[g]instanceof h:case this.defaults[g]instanceof c:this.data[g]=this.defaults[g];continue}else this._new||("object"===b.type(a[g])?e(this.data[g],a[g])&&(this.changeset[g]=a[g]):this.data[g]!=a[g]&&(this.changeset[g]=a[g]));"object"===b.type(a[g])&&"object"===
b.type(this.data[g])?b.extend(!0,this.data[g],a[g]):this.data[g]=a[g]}this._new=!1;a._parsed=!0}},parseHash:function(a){if(a instanceof c)return this;"string"==typeof a?this.href=a:a&&void 0!==a.href?(this.href=a.href,delete a.href):a&&(void 0!==a.id&&void 0!==this.url)&&(this.href=this.url+a.id);return this},isChanged:function(){return!b.isEmptyObject(this.changeset)},clearChangeset:function(){this._changed=!1;this.changeset={};return this},get:function(a){return this.data[a]},set:function(a,c,d){var e=
{};"string"===b.type(a)?e[a]=c:(e=a,d=c);d=b.extend({},{silent:!1},d);this.clearChangeset()._parse(e);this._changed=!0;b.isEmptyObject(this.changeset)||d.silent||this.triggerHandler("set",this.changeset);return this},_getClientHash:function(){this._clientHash||(this._clientHash="mcid-"+String(this._clientId));return this._clientHash},hash:function(){!this.href&&this.data.href&&(this.href=this.data.href);return this.data.href||this.href||this._getClientHash()},relationHash:function(a){a&&(this.data.Id=
a);return this.data.Id},off:function(a,c){b(this).off(a,c);return this},on:function(a,c,d){if(void 0===d)b(this).off(a,c),b(this).on(a,c);else b(this).on(a,function(){c.apply(d,arguments)});return this},one:function(a,c,d){if(void 0===d)b(this).off(a,c),b(this).one(a,c);else b(this).one(a,function(){c.apply(d,arguments)});return this},trigger:function(a,c){b(this).trigger(a,c);return this},triggerHandler:function(a,c){b(this).triggerHandler(a,c);return this}};f.prototype={items:{},garbageTime:1500,
refresh:function(a){a._exTime||(a._exTime=new Date);a._exTime.setTime(a._exTime.getTime()+this.garbageTime)},set:function(a,c){var d=this;b(c).on("sync get get-prop set-prop",function(){d.refresh(this)});d.refresh(c);this.items[a]||(this.items[a]=c);return this.items[a]},replace:function(a,c,b){delete this.items[a];return this.set(c,b)},garbage:function(){for(var a in this.items)this.items[a]._exTime&&this.items[a]._exTime<new Date&&(b(this.items[a]).triggerHandler("garbage"),delete this.items[a])},
remove:function(a){delete this.items[a]}};var o=c.options={},l,q;c.extend=l=function(c,g){var e;e=d.extend.call(this,c);e.extend=l;e.prototype.Class=e;e.on=function(a,c,d){b(e).on(a,function(){c.apply(d,arguments)});return e};e.off=function(a,c){b(e).off(a,c);return e};e.triggerHandler=function(a,c){b(e).triggerHandler(a,c)};g&&g.register&&(a[g.register]=e,delete g.register);e.prototype.options=b.extend({},g);return e};h.prototype={_list:[],_events:{},getList:function(){return this._list},count:function(){return this._list.length},
_construct:function(){this.model||(this.model=c);this._list=[];this._events={};this.desynced=!0;var a=buildOptions=function(){void 0},d;for(d in arguments)switch(b.type(arguments[d])){case "function":this.model=arguments[d];break;case "string":this.href=arguments[d];break;case "array":a=function(a){return function(){this._list=this._parse(a)}}(arguments[d]);break;case "object":buildOptions=function(a){return function(){this.options=a;a.href&&(this.href=a.href)}}(arguments[d])}buildOptions.call(this);
a.call(this);o=b.extend({},{init:!0},this.options);o.init&&this.init.apply(this,arguments)},init:function(){},get:function(a){var c=b.Deferred(),d=this;searchKey=function(){for(var b=0;b<d._list.length;b++)if(a==d._list[b].hash()||a==d._list[b].relationHash())return c.resolve(d._list[b]);c.reject()};this.desynced&&this.sync().done(function(){c.resolve(searchKey())})?c:searchKey();return c},remove:function(a){for(var c in this._list)if(a==this._list[c].hash()||a==this._list[c].relationHash()){Array.prototype.splice.call(this._list,
c,1);break}return this},syncAdapter:j,setHref:function(a){this.href=a;return this},each:function(a){b.each(this._list,a)},forwardEach:function(a,c){this._list.forEach(a,c)},reverseEach:function(a,c){for(var b=this._list.length;0<b;++b)a.call(c||this,this[b],b,this)},feed:function(a,c){var b=[],d;for(d in this._list)b[d]=this._list[d].feed(a,c);return b},sync:function(a){var c=this;return this.href&&this.syncAdapter.request.call(this.syncAdapter,this.href).read(a).done(function(a){var b=c.parseAttributes(a);
c.parse(a);list=c._parse(a);changeset=[];removeings=[];updates=[];addings=[];count=c._list.length;for(a=0;a<list.length;a++){for(var d=!1,e=0;e<count;e++)if(list[a].hash()==c._list[e].hash()){d=list[a];break}if(d)if(c.hasEvent("updates")&&updates.push(d),c.isCollectionDeleted(d)&&(c._list.splice(a,1),c.hasEvent("removeings")&&removeings.push(d)),d.isDeleted())d._remove();else if(d.isChanged())changeset.push(d);else d.on("delete",function(){c.remove(this.hash())}).on("garbage",function(){this.desynced=
!0});else list[a].isDeleted()?c.hasEvent("updates")&&updates.push(list[a]):(c._list.push(list[a]),changeset.push(list[a]),c.hasEvent("addings")&&addings.push(list[a]))}c.desynced=!1;0===count?c.triggerHandler("read",[c._list,b]):(updates.length&&c.hasEvent("updates")&&c.triggerHandler("updates",[updates,b]),addings.length&&c.hasEvent("addings")&&c.triggerHandler("addings",[addings,b]),removeings.length&&c.hasEvent("removeings")&&c.triggerHandler("removeings",[removeings,b]),c.triggerHandler("update",
[changeset,b]))})},isCollectionDeleted:function(){return!1},modelDataBuild:function(a){return a},parseAttributes:function(a){return a},parse:function(a){var c=a;if(!Array.isArray(a))for(i in a)if(b.isArray(a[i])){c=a[i];break}return c},_parse:function(a){a=this.parse(a);for(var c=[],b=0,d=a.length;b<d;b++)c.push(this.modelDataBuild(new this.model(a[b])));return c},insert:function(a){this.desynced=!1;a instanceof c||(a=this.modelDataBuild(new this.model(a)));this._list.push(a);a.hash();return a.sync(this.href)},
off:function(a,c){b(this).off(a,c);for(var d=a.split(" "),e=0,f=d.length;e<f;e++)delete this._events[d[e]];return this},on:function(a,c,d){if(void 0===d)b(this).off(a,c),b(this).on(a,c);else b(this).on(a,function(){c.apply(d,arguments)});a=a.split(" ");for(var e=0,f=a.length;e<f;e++)this._events[a[e]]=!0;return this},one:function(a,c,d){if(void 0===d)b(this).off(a,c),b(this).one(a,c);else b(this).one(a,function(){c.apply(d,arguments)});return this},trigger:function(a,c){b(this).trigger(a,c);return this},
triggerHandler:function(a,c){b(this).triggerHandler(a,c);return this},hasEvent:function(a){return"undefined"===b.type(this._events[a])?!1:this._events[a]}};h.extend=q=function(c,e){var f;f=d.extend.call(this,c);f.extend=q;e&&e.register&&(a[e.register]=f,delete e.register);f.prototype.options=b.extend({},e);return f};var s=0,t=d.extend({getProperty:function(a){return!this[a]?null:"function"===typeof this[a]?this[a]():this[a]}}).extend({tagName:"div",attributes:{className:"",id:""},namespace:"view",
_constructor:function(a,c){b.extend(this,a);this._clientId=s++;c=b.extend({},{init:!0,events:!0,ensure:!0},c);c.ensure&&this._ensureElement();c.init&&this.init.apply(this,arguments);c.events&&this.resetEvents()},_ensureElement:function(){var a=this.attributes.className,c=this.attributes.id,d="";b(this.el).length?this.el=b(this.el):("string"===b.type(this.el)&&("."==this.el[0]&&(a+=this.el.substr(0,1)),"#"==this.el[0]&&(c=this.el.substr(0,1))),d="\x3c"+this.tagName,""!==a&&(d=d+' class\x3d"'+a+'"'),
""!==c&&(d=d+' id\x3d"'+c+'"'),d=d+"\x3e\x3c/"+this.tagName+"\x3e",this.el=b(d))},init:function(){return this},resetEvents:function(){this.undelegateEvents();this.delegateEvents()},delegateEvents:function(a){if(a||(a=this.getProperty("events")))for(var c in a){var d=a[c],e;for(e in d){var f=d[e];if("string"===typeof f&&b.isFunction(this[f]))b(this.el).on(this.getEvent(e),c,this[f].bind(this))}}},undelegateEvents:function(){b(this.el).off(this.getNamespace());return this},getEvent:function(a){return a+
this.getNamespace()},getNamespace:function(){return"."+this.getProperty("namespace")},render:function(){this.delegateEvents();return this},remove:function(){b(this.el).remove();this.destroy();return this},destroy:function(){this.model&&this.model.trigger("destroy");this.collection&&this.collection.trigger("destroy");return this},checkElement:function(){return void 0===this.el?!1:void 0!==this.el.selector&&""!=this.el.selector?1===b(this.el.selector).length:b(this.el).is(":visible")},setElement:function(a){this.undelegateEvents();
a=b(a);var c=this.el.data();this.el.replaceWith(a);this.el=a;this.el.data(c);this.delegateEvents();return this},resetElement:function(a){this.el=b(a);this._ensureElement();this.delegateEvents()}});return{Model:c,Collection:h,Sync:j,UniqueContainer:f,View:t,Url:k,Register:a}});
define("gizmo/superdesk",["jquery","gizmo"],function(b,d){var e=b.extend({},d.Sync,{reset:function(){try{delete this.options.headers["X-Filter"],this.options.data={}}catch(a){}}}),a=function(){AuthApp.success=function(){};AuthApp.require.apply(this,arguments)},c=b.extend({},e,{options:{fail:function(d){401==d.status&&a.apply(c,arguments);404==d.status&&ErrorApp.require.apply(this,arguments)}},href:function(a){return-1===a.indexOf("my/")?a.replace("resources/","resources/my/"):a}}),f=function(){this.syncAdapter.options.headers||
(this.syncAdapter.options.headers={});this._xfilter=1<arguments.length?b.makeArray(arguments).join(","):b.isArray(arguments[0])?arguments[0].join(","):arguments[0];this.syncAdapter.options.headers["X-Filter"]=this._xfilter;this.syncAdapter.options.headers["X-Format-DateTime"]="M/dd/yyyy HH:mm:ss";return this},h=function(a,c){void 0===a?delete this.syncAdapter.options.data[c]:(void 0===this.syncAdapter.options.data&&(this.syncAdapter.options.data={}),this.syncAdapter.options.data[c]=a);return this},
k=function(a,c){void 0===c&&(c="CId");return h.call(this,a,c+".since")},j=function(a,c){void 0===c&&(c="CId");return h.call(this,a,c+".until")},p=function(a,c){void 0===c&&(c="CId");return h.call(this,a,c+".start")},o=function(a,c){void 0===c&&(c="CId");return h.call(this,a,c+".end")},l=d.Model.extend({isDeleted:function(){return this._forDelete||this.data.DeletedOn},syncAdapter:e,xfilter:f,since:k,until:j,start:p,end:o}),q=function(a){"object"===typeof a&&(a.syncAdapter=c);a.modelDataBuild=function(a){return q(a)};
return a},s=d.Model.extend({syncAdapter:c,xfilter:f,since:k,until:j}),t=d.Collection.extend({xfilter:f,since:k,until:j,start:p,end:o,asc:function(a){return h.call(this,a,"asc")},desc:function(a){return h.call(this,a,"desc")},limit:function(a){return h.call(this,a,"limit")},offset:function(a){return h.call(this,a,"offset")},syncAdapter:e}),f=d.Collection.extend({xfilter:f,since:k,until:j,start:p,end:o,syncAdapter:c});l.extend=function(){var a=d.Model.extend.apply(this,arguments),c=new d.UniqueContainer;
b.extend(a.prototype,{_uniq:c,pushUnique:function(){return c.set(this.hash(),this)}},arguments[0]);return a};return{Auth:q,Model:l,AuthModel:s,Collection:t,AuthCollection:f,Sync:e,AuthSync:c,View:d.View,Url:d.Url,Register:d.Register}});
define("utils/twitter",[],function(){return{link:{anchor:function(b){return b.replace(/[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z]+:\/\/[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_]+\.[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_:%&\?\/.=]+/g,function(d){d=d.link(d);return d=d.replace('href\x3d"','target\x3d"_blanka" href\x3d"')})},user:function(b){return b.replace(/[@]+[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_]+/g,function(d){var b=d.replace("@",
"");d=d.link("http://twitter.com/"+b);return d=d.replace('href\x3d"','target\x3d"_blankb" onclick\x3d"loadProfile(\''+b+'\');return(false);"  href\x3d"')})},tag:function(b){return b.replace(/[#]+[\u00e4\u00e9\u00f6\u00fc\u00df\u00c4\u00d6\u00dcA-Za-z0-9-_]+/g,function(d){var b=d.replace("#","%23");d=d.link("http://twitter.com/search?q\x3d"+b);return d=d.replace('href\x3d"','target\x3d"_blank" href\x3d"')})},all:function(b){b=this.anchor(b);b=this.user(b);return b=this.tag(b)}}}});
define("dust/dust-helpers",["dust/dust","jquery","utils/twitter","jquery/i18n","jquery/utils"],function(b,d,e){function a(a){return function(c){try{return c=JSON.parse(c),c.annotation[a]}catch(b){}return""}}var c=function(a){if(d.isDefined(a.param1)){for(var c=1,b=a.length+1,e=[];c<b;c++)d.isDefined(a["param"+c])&&(e[c]=a["param"+c]);return e}return a};b.helpers={i18n:function(a,b,e,j){msgid=j.msgid;msgid_plural=j.msgid_plural;n=j.n;domain=j.domain;msgctxt=j.msgctxt;j&&j.msgid?(delete j.msgid,a.write(d.i18n.dcnpgettext(domain,
msgctxt,msgid,msgid_plural,n).format(c(j)))):window.console&&window.console.log("No expression given!");return a},sep:function(a,c,b){return c.stack.index===c.stack.of-1?a:b.block(a,c)},idx:function(a,c,b){return b.block(a,c.push(c.stack.index))},"if":function(a,c,b,d){var e=d.cond;if(d&&d.cond){"function"===typeof e&&(e="",a.tap(function(a){e+=a;return""}).render(d.cond,c).untap(),""===e&&(e=!1));if(eval(e))return a.render(b.block,c);if(b["else"])return a.render(b["else"],c)}else window.console&&
window.console.log("No expression given!");return a}};b.filters.t=function(a){return d("\x3cdiv\x3e"+a+"\x3c/div\x3e").text()};b.filters.twitter_all=function(a){return e.link.all(a)};b.filters.twitter_annotation_before=a(0);b.filters.twitter_annotation_after=a(1);return b});define("dust/core",["dust/dust","dust/dust-helpers"],function(b){return b});
define("jquery/tmpl",["jquery","dust/core"],function(b,d){b.fn.extend({tmpl:function(d,a,c){if(""!==d)return"#"===d[0]&&(d=d.slice(1)),b.isFunction(a)&&(c=a),this.each(function(){$that=b(this);b.tmpl(d,a,function(a,d){a?window.console&&window.console.log(a):$that.html(d);b.isFunction(c)&&c.apply($that)})})}});b.extend({tmpl:function(b,a,c){d.render(b,a,c)},tmplFn:function(b){return d.compileFn(b)}})});
define("tmpl",["dust/compiler","dust/i18n_parse"],function(b,d){var e,a,c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],f=function(){throw Error("Environment unsupported.");},h={};b||(b=exports);"undefined"!==typeof process&&process.versions&&process.versions.node?(e=require.nodeRequire("fs"),f=function(a,c){c(e.readFileSync(a,"utf8"))}):"undefined"!==typeof window&&window.navigator&&window.document||"undefined"!==typeof importScripts?(a=function(){var a,b,d;if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;
for(b=0;3>b;b++){d=c[b];try{a=new ActiveXObject(d)}catch(e){}if(a){c=[d];break}}if(!a)throw Error("getXhr(): XMLHttpRequest not available");return a},f=function(c,b){var d=a();d.open("GET",c,!0);d.onreadystatechange=function(){4===d.readyState&&b(d.responseText)};d.send(null)}):"undefined"!==typeof Packages&&(f=function(a,c){var b=new java.io.File(a),d=java.lang.System.getProperty("line.separator"),b=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(b),"utf-8")),
e,f,h="";try{e=new java.lang.StringBuffer;(f=b.readLine())&&(f.length()&&65279===f.charAt(0))&&(f=f.substring(1));for(e.append(f);null!==(f=b.readLine());)e.append(d),e.append(f);h=String(e.toString())}finally{b.close()}c(h)});return{write:function(a,c,b){h.hasOwnProperty(c)&&b.asModule(a+"!"+c,h[c])},load:function(a,c,e,o){var l=c.toUrl(a+".dust");f(l,function(c){c=d(c);try{c="define(['dust'],function(dust){"+b.compile(c,a)+" return {render: function(context, callback) {return dust.render('"+a+"', context, callback)}}})"}catch(f){throw f.message=
"In "+l+", "+f.message,f;}o.isBuild&&(h[a]=c);o.isBuild||(c+="\r\n//@ sourceURL\x3d"+l);e.fromText("tmpl!"+a,c)})}}});
define("livedesk-embed/views/post","jquery gizmo/superdesk jquery/tmpl jquery/utils tmpl!theme/item/base tmpl!theme/item/item tmpl!theme/item/annotated tmpl!theme/item/social-share tmpl!theme/item/posttype/normal tmpl!theme/item/posttype/wrapup tmpl!theme/item/posttype/quote tmpl!theme/item/posttype/link tmpl!theme/item/source/advertisement tmpl!theme/item/source/google tmpl!theme/item/source/twitter tmpl!theme/item/source/youtube tmpl!theme/item/source/flickr tmpl!theme/item/source/soundcloud tmpl!theme/item/source/instagram".split(" "),function(b,
d){return d.View.extend({init:function(){var b=this;b.xfilter="PublishedOn, DeletedOn, Order, Id, CId, Content, CreatedOn, Type, AuthorName, Author.Source.Name, Author.Source.Id, IsModified, AuthorPerson.EMail, AuthorPerson.FirstName, AuthorPerson.LastName, AuthorPerson.Id, Meta, IsPublished, Creator.FullName";b.model.on("read update",function(a,c){b._parent.model.get("PostPublished").isCollectionDeleted(b.model)||b.render(a,c)}).on("delete",b.remove,b).xfilter(b.xfilter).sync()},remove:function(){this._parent.removeOne(this);
this.el.remove();this.model.off("read update delete");return this},toggleWrap:function(d,a){"boolean"!=typeof a&&(a=!1);this._toggleWrap(b(d).closest("li").first(),a)},_toggleWrap:function(b){b.hasClass("open")?(b.removeClass("open").addClass("closed"),b.nextUntil(".wrapup,#loading-more").hide()):(b.removeClass("closed").addClass("open"),b.nextUntil(".wrapup,#loading-more").show())},render:function(d,a){var c=this;a=c.model.feed();var f=parseFloat(c.model.get("Order"));!isNaN(c.order)&&f!=c.order&&
(c.order=f,c._parent.reorderOne(c));a.HashIdentifier=c._parent.hashIdentifier;a.Meta&&(a.Meta=JSON.parse(a.Meta),null===a.Meta.annotation[1]&&(a.Meta.annotation=a.Meta.annotation[0],a.Meta.annotation=b.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],a.Meta.annotation)),"string"!==typeof a.Meta.annotation?(f=a.Meta.annotation,a.Meta.annotation={before:b.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],f[0]),after:b.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],f[1])}):a.Meta.annotation=b.trimTag(["\x3cbr\x3e","\x3cbr /\x3e"],
a.Meta.annotation));a.permalink=c._parent.location+"#"+c._parent.hashIdentifier+a.Order;"internal"!==a.Author.Source.Name?a.item="source/"+a.Author.Source.Name:a.Type&&(a.item="posttype/"+a.Type.Key);a.CreatedOn&&(a.CreatedOn=(new Date(a.CreatedOn)).format(_("dd.mm.yyyy, HH:MM:ss")));a.Content&&(a.Content=a.Content.replace(livedesk.server(),livedesk.FrontendServer));b.tmpl("theme/item/item",a,function(d,e){if(d)console.error(d);else{c.setElement(e);var f=b('input[data-type\x3d"permalink"]',c.el);
b('a[rel\x3d"bookmark"]',c.el).on(c.getEvent("click"),function(){"visible"===f.css("visibility")?f.css("visibility","hidden"):(f.css("visibility","visible"),f.trigger(c.getEvent("focus")),b(".result-header .share-box",c.el).fadeOut("fast"))});f.on(c.getEvent("focus")+" "+c.getEvent("click"),function(){b(this).select()});b(".big-toggle",c.el).off(c.getEvent("click")).on(c.getEvent("click"),function(){c.toggleWrap(this,!0)});b(".result-header",c.el).parent().hover(function(){},function(){b(this).find(".share-box").fadeOut(100);
b('input[data-type\x3d"permalink"]',c.el).css("visibility","hidden")});b(".sf-share",c.el).on(c.getEvent("click"),function(d){d.preventDefault();var e=b(this);if("yes"!=e.attr("data-added")){d=c._parent.model.get("Title");var f=escape(a.permalink),h=b(".result-content img:first",c.el).attr("src"),h="http://pinterest.com/pin/create/button/?url\x3d"+f+"\x26media\x3d"+h+"\x26description\x3d",j="https://plus.google.com/share?url\x3d"+f+"\x26t\x3d",k="mailto:?to\x3d\x26subject\x3d"+_("Check out this Live Blog")+
"\x26body\x3d"+f;d={fbclick:"$.socialShareWindow('http://facebook.com/share.php?u\x3d"+f+"',400,570); return false;",twtclick:"$.socialShareWindow('http://twitter.com/home?status\x3d"+_("Now reading ")+d+": "+f+"',400,570); return false;",linclick:"$.socialShareWindow('http://www.linkedin.com/shareArticle?mini\x3dtrue\x26url\x3d"+f+"', 400, 570); return false;",pinclick:"$.socialShareWindow('"+h+"', 400, 700); return false;",gglclick:"$.socialShareWindow('"+j+"', 400, 570); return false;",emailclick:"$.socialShareWindow('"+
k+"', 1024, 768); return false;",emailurl:k};b.tmpl("theme/item/social-share",d,function(a,c){e.after(c);e.attr("data-added","yes")})}b('input[data-type\x3d"permalink"]',c.el).css("visibility","hidden");b(this).next(".share-box").toggle()})}});setTimeout(function(){})}})});define("window",[],function(){return window});define("document",[],function(){return document});
define("jquery/scrollspy",["jquery","window","document"],function(b,d){b.fn.extend({scrollspy:function(e){e=b.extend({},{min:0,max:0,mode:"vertical",buffer:0,container:d,onEnter:e.onEnter?e.onEnter:[],onLeave:e.onLeave?e.onLeave:[],onTick:e.onTick?e.onTick:[]},e);return this.each(function(){var a=this,c=e,d=b(c.container),h=c.mode,k=c.buffer,j=leaves=0,p=!1;d.bind("scroll",function(){var e={top:b(this).scrollTop(),left:b(this).scrollLeft()},l="vertical"==h?e.top+k:e.left+k,q=c.max,s=c.min;b.isFunction(c.max)&&
(q=c.max());b.isFunction(c.min)&&(s=c.min());0==q&&(q="vertical"==h?d.height():d.outerWidth()+b(a).outerWidth());if(l>=s&&l<=q){if(!p&&(p=!0,j++,b(a).trigger("scrollEnter",{position:e}),b.isFunction(c.onEnter)))c.onEnter(a,e);b(a).trigger("scrollTick",{position:e,inside:p,enters:j,leaves:leaves});if(b.isFunction(c.onTick))c.onTick(a,e,p,j,leaves)}else if(p&&(p=!1,leaves++,b(a).trigger("scrollLeave",{position:e,leaves:leaves}),b.isFunction(c.onLeave)))c.onLeave(a,e)})})}})});
define("livedesk-embed/collections/autocollection",["gizmo/superdesk"],function(b){return b.Collection.extend({_timeInterval:1E4,_idInterval:0,_stats:{limit:15,offset:0,lastCId:0,fistOrder:Infinity,total:0},keep:!1,init:function(){var b=this;b.model.on("publish reorder",function(e,a){b._stats.lastCId+1===parseInt(a.get("CId"))&&b._stats.lastCId++});b.on("readauto",function(e,a,c){b._stats.offset=b._stats.limit;b._stats.total=parseInt(c.total);c.lastCId=parseInt(c.lastCId);c.lastCId>b._stats.lastCId&&
(b._stats.lastCId=c.lastCId);b.getFirstOrder(a)}).on("readauto updatesauto addingsauto removeingsauto update",function(e,a){b.getLastCid(a);b.getFirstOrder(a)}).on("addingsauto",function(e,a){b._stats.total+=a.length;b._stats.offset+=a.length}).on("removeingsauto",function(e,a){b._stats.total-=a.length;b._stats.offset-=a.length}).on("addings",function(e,a){b._stats.offset+=a.length})},destroy:function(){this.stop()},auto:function(){var b=this;ret=this.stop().start();this._idInterval=setInterval(function(){b.start()},
this._timeInterval);return ret},start:function(){var b={data:{"cId.since":this._stats.lastCId,"order.start":this._stats.fistOrder},headers:{"X-Filter":this._xfilter,"X-Format-DateTime":"M/dd/yyyy HH:mm:ss"}};0===this._stats.lastCId&&delete b.data;if(!this.keep&&this.view&&!this.view.checkElement())this.stop();else return this.triggerHandler("beforeUpdate"),this.autosync(b)},stop:function(){clearInterval(this._idInterval);return this},getFirstOrder:function(b){for(var e=0,a,c=b.length;e<c;e++)a=parseFloat(b[e].get("Order")),
!isNaN(a)&&this._stats.fistOrder>a&&(this._stats.fistOrder=a)},getLastCid:function(b){for(var e=0,a,c=b.length;e<c;e++)a=parseInt(b[e].get("CId")),!isNaN(a)&&this._stats.lastCId<a&&(this._stats.lastCId=a)},autosync:function(b){var e=this;return this.href&&this.syncAdapter.request.call(this.syncAdapter,this.href).read(b).done(function(a){var c=e.parseAttributes(a);a=e._parse(a);for(var b=[],d=[],k=[],j=[],p=e._list.length,o=0;o<a.length;o++){for(var l=!1,q=0;q<e._list.length;q++)if(a[o].hash()==e._list[q].hash()){l=
a[o];break}if(l)if(e.hasEvent("updatesauto")&&k.push(l),e.isCollectionDeleted(l)&&(e._list.splice(q,1),e.hasEvent("removeingsauto")&&d.push(l)),l.isDeleted())l._remove();else if(l.isChanged())b.push(l);else l.on("delete",function(){e.remove(this.hash())}).on("garbage",function(){this.desynced=!0});else e.isCollectionDeleted(a[o])?e.hasEvent("removeingsauto")&&e.hasEvent("removeingsauto")&&d.push(a[o]):a[o].isDeleted()?e.hasEvent("updatesauto")&&k.push(a[o]):(e._list.push(a[o]),b.push(a[o]),e.hasEvent("addingsauto")&&
j.push(a[o]))}e.desynced=!1;0===p?e.triggerHandler("readauto",[e._list,c]):(k.length&&e.hasEvent("updatesauto")&&e.triggerHandler("updatesauto",[k,c]),j.length&&e.hasEvent("addingsauto")&&e.triggerHandler("addingsauto",[j,c]),d.length&&e.hasEvent("removeingsauto")&&e.triggerHandler("removeingsauto",[d,c]),e.triggerHandler("updateauto",[b,c]))})}},{register:"AutoCollection"})});define("livedesk-embed/models/user",["gizmo/superdesk"],function(b){return b.Model.extend({},{register:"User"})});
define("utils/extend",[],function(){Array.prototype.forEach||(Array.prototype.forEach=function(a,c){for(var b=0,d=this.length;b<d;++b)a.call(c||this,this[b],b,this)});Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),b=this,d=function(){},e=function(){return b.apply(this instanceof d?this:a,c.concat(Array.prototype.slice.call(arguments)))};
d.prototype=this.prototype;e.prototype=new d;return e});String.prototype.trim||(String.prototype.trim=function(){for(var a=this.replace(/^\s\s*/,""),c=/\s/,b=a.length;c.test(a.charAt(--b)););return a.slice(0,b+1)});String.prototype.trunc=function(a,c){var b=this.length>a,d=b?this.substr(0,a-1):this,d=c&&b?d.substr(0,d.lastIndexOf(" ")):d;return b?d+"...":d};var b,d=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
a=/[^-+\dA-Z]/g,c=function(a,c){a=String(a);for(c=c||2;a.length<c;)a="0"+a;return a};b=function(f,h,k){1==arguments.length&&("[object String]"==Object.prototype.toString.call(f)&&!/\d/.test(f))&&(h=f,f=void 0);f=f?new Date(f):new Date;if(isNaN(f))throw SyntaxError("invalid date");h=String(b.masks[h]||h||b.masks["default"]);"UTC:"==h.slice(0,4)&&(h=h.slice(4),k=!0);var j=k?"getUTC":"get",p=f[j+"Date"](),o=f[j+"Day"](),l=f[j+"Month"](),q=f[j+"FullYear"](),s=f[j+"Hours"](),t=f[j+"Minutes"](),r=f[j+"Seconds"](),
j=f[j+"Milliseconds"](),g=k?0:f.getTimezoneOffset(),m={d:p,dd:c(p),ddd:b.i18n.dayNames[o],dddd:b.i18n.dayNames[o+7],m:l+1,mm:c(l+1),mmm:b.i18n.monthNames[l],mmmm:b.i18n.monthNames[l+12],yy:String(q).slice(2),yyyy:q,h:s%12||12,hh:c(s%12||12),H:s,HH:c(s),M:t,MM:c(t),s:r,ss:c(r),l:c(j,3),L:c(99<j?Math.round(j/10):j),t:12>s?"a":"p",tt:12>s?"am":"pm",T:12>s?"A":"P",TT:12>s?"AM":"PM",Z:k?"UTC":(String(f).match(e)||[""]).pop().replace(a,""),o:(0<g?"-":"+")+c(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,
4),S:["th","st","nd","rd"][3<p%10?0:(10!=p%100-p%10)*p%10]};return h.replace(d,function(a){return a in m?m[a]:a.slice(1,a.length-1)})};b.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};b.i18n={dayNames:_("Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday").toString().split(","),
monthNames:_("Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec,January,February,March,April,May,June,July,August,September,October,November,December").toString().split(",")};Date.prototype.format=function(a,c){return b(this,a,c)}});
define("livedesk-embed/models/post",["gizmo/superdesk","livedesk-embed/models/user","utils/extend"],function(b){return b.Model.extend({defaults:{Creator:b.Register.User},services:{flickr:!0,google:!0,twitter:!0,facebook:!0,youtube:!0},getClass:function(){switch(this.get("Type").Key){case "wrapup":return"wrapup";case "quote":return"quotation";case "advertisement":return"advertisement";default:return this.isService()?"service":"tw"}},isService:function(){return this.get("AuthorName")in this.services},
isQuote:function(){return"quotation"==this.getClass()},twitter:{link:{anchor:function(b){return b.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/g,function(b){b=b.link(b);return b=b.replace('href\x3d"','target\x3d"_blank" href\x3d"')})},user:function(b){return b.replace(/[@]+[A-Za-z0-9-_]+/g,function(b){var a=b.replace("@","");b=b.link("http://twitter.com/"+a);return b=b.replace('href\x3d"','target\x3d"_blank" onclick\x3d"loadProfile(\''+a+'\');return(false);"  href\x3d"')})},tag:function(b){return b.replace(/[#]+[A-Za-z0-9-_]+/g,
function(b){var a=b.replace(" #"," %23");b=b.link("http://summize.com/search?q\x3d"+a);return b=b.replace('href\x3d"','target\x3d"_blank" href\x3d"')})},all:function(b){b=this.anchor(b);b=this.user(b);return b=this.tag(b)}}}},{register:"Post"})});
define("livedesk-embed/collections/posts",["gizmo/superdesk","livedesk-embed/collections/autocollection","livedesk-embed/models/post"],function(b){return b.Register.AutoCollection.extend({parse:function(b){void 0!==b.total&&(b.total=parseInt(b.total),this.listTotal=b.total,delete b.total);return b.PostList?b.PostList:b},parseAttributes:function(b){return{lastCId:b.lastCId,offset:b.offset,offsetMore:b.offsetMore,total:b.total,limit:b.limit}},isCollectionDeleted:function(b){return"True"===b.get("IsPublished")?
!1:!0},model:b.Register.Post},{register:"Posts"})});define("livedesk-embed/models/blog",["gizmo/superdesk","livedesk-embed/collections/posts"],function(b){return b.Model.extend({defaults:{PostPublished:b.Register.Posts}},{register:"Blog"})});
define("jquery/xdomainrequest",["jquery"],function(b){this.XDomainRequest&&b.ajaxTransport("+*",function(d){if(d.crossDomain&&d.async){d.timeout&&(d.xdrTimeout=d.timeout,delete d.timeout);var e;return{send:function(a,c){function f(a,d,f,h){e.onload=e.onerror=e.ontimeout=b.noop;e=void 0;c(a,d,f,h)}e=new XDomainRequest;if(d.dataType){var h="";for(i in d.headers)h+=i+"\x3d"+encodeURIComponent(d.headers[i])+"\x26";h=h.replace(/(\s+)?.$/,"");d.url=d.url+(-1===d.url.indexOf("?")?"?":"\x26")+h}e.open(d.type,
d.url);e.onload=function(){f(200,"OK",{text:e.responseText},"Content-Type: "+e.contentType)};e.onerror=function(){f(404,"Not Found")};d.xdrTimeout&&(e.ontimeout=function(){f(0,"timeout")},e.timeout=d.xdrTimeout);e.send(d.hasContent&&d.data||null)},abort:function(){e&&(e.onerror=b.noop(),e.abort())}}}})});
define("livedesk-embed/views/timeline","jquery gizmo/superdesk livedesk-embed/views/post jquery/tmpl jquery/scrollspy livedesk-embed/models/blog tmpl!theme/container jquery/xdomainrequest".split(" "),function(b,d,e){b.support.cors=!0;return d.View.extend({limit:6,hashIdentifier:"livedeskitem\x3d",location:"",_views:[],el:"#livedesk-root",timeInterval:1E4,events:{"#loading-more":{click:"moreButton"}},idInterval:0,flags:{addAllPending:!1,more:!1,moreButton:!1,atEnd:!1},scroll:{element:null,start:0},
autoRender:!0,pendingAutoupdates:[],moreButton:function(){var a=this;!a.flags.atEnd&&!a.flags.moreButton&&(a.flags.moreButton=!0,a.flags.more=!0,a.model.get("PostPublished"),postPublished=a.model.get("PostPublished"),a.filters&&b.each(a.filters,function(a,b){postPublished[a].apply(postPublished,b)}),postPublished.xfilter(a.xfilter).limit(postPublished._stats.limit).offset(postPublished._stats.offset).sync().done(function(){var b=a.model.get("PostPublished").total;a.toggleMoreVisibility();a._views.length>=
b&&(a.flags.atEnd=!0);a.flags.more=!1;a.flags.moreButton=!1}))},more:function(){var a=this;!a.flags.atEnd&&!a.flags.more&&(a.flags.more=!0,a.model.get("PostPublished"),postPublished=a.model.get("PostPublished"),a.filters&&b.each(a.filters,function(a,b){postPublished[a].apply(postPublished,b)}),postPublished.xfilter(a.xfilter).limit(postPublished._stats.limit).offset(postPublished._stats.offset).sync().done(function(){var c=a.model.get("PostPublished").total;a._views.length>=c&&(a.flags.atEnd=!0,b("#liveblog-posts li#loading-more",
a.el).hide());a.flags.more=!1}))},setIdInterval:function(a){this.idInterval=setInterval(a,this.timeInterval);return this},pause:function(){clearInterval(this.idInterval);return this},sync:function(){var a=this;this.auto().pause().setIdInterval(function(){a.auto()})},auto:function(){this.model.xfilter().sync({force:!0});return this},ensureStatus:function(){if(this.model.get("ClosedOn")){var a=new Date(this.model.get("ClosedOn"));this.pause();this.model.get("PostPublished").stop();this.el.find("#liveblog-status-time").html(_("The liveblog coverage was stopped ")+
a.format(_("dd.mm.yyyy, HH:MM:ss")))}},gotoHash:function(){if(0<location.hash.length){var a=location.hash;location.hash="";location.hash=a}},init:function(){var a=this;a._views=[];a.location=window.location.href.split("#")[0];a.rendered=!1;"string"===b.type(a.url)&&(a.model=new d.Register.Blog(a.url.replace("my/","")));a.xfilter="PublishedOn, DeletedOn, Order, Id, CId, Content, CreatedOn, Type, AuthorName, Author.Source.Name, Author.Source.Id, IsModified, AuthorPerson.EMail, AuthorPerson.FirstName, AuthorPerson.LastName, AuthorPerson.Id, Meta, IsPublished, Creator.FullName";
a.model.on("read",function(){if(!a.rendered){var b,d=window.location.href.split("#"),e=a.model.get("PostPublished");e.on("read readauto",a.render,a).on("addings",a.addAll,a).on("addingsauto",a.addAllAutoupdate,a).on("removeingsauto",a.removeAllAutoupdate,a).on("updateauto",a.updateStatus,a).on("beforeUpdate",a.updateingStatus,a).xfilter(a.xfilter).limit(e._stats.limit);d[1]&&-1!==(b=d[1].indexOf(a.hashIdentifier))?(b=parseFloat(d[1].substr(b+a.hashIdentifier.length)),a.filters={end:[b,"order"]},e.one("rendered",
a.showLiner,a).end(b,"order").sync()):e.offset(e._stats.offset).auto()}a.rendered=!0}).on("update",function(){a.ensureStatus();a.renderBlog()});a.sync()},showLiner:function(){var a=this;b("#load-more").on("click",function(){a.el.find("#liveblog-post-list").html("");i=0;for(count=a._views.length;i<count;i++)a._views[i].rendered=!1;a._views=[];delete a.filters;var c=a.model.get("PostPublished");c._list=[];c._latestCId=0;c.limit(c._stats.limit).offset(c._stats.offset).auto();b(this).hide()}).show()},
removeOne:function(a){var b=this._views.indexOf(a);a=this.model.get("PostPublished")._list.indexOf(a.model);-1!==b&&(this.model.get("PostPublished").total--,this._views.splice(b,1),-1!==a&&this.model.get("PostPublished")._list.splice(a,1),this.markScroll());return this},reorderOne:function(a){this._views.sort(function(a,b){return a.order-b.order});pos=this._views.indexOf(a);0===pos?a.el.insertAfter(this._views[1].el):a.el.insertBefore(this._views[0<pos?pos-1:1].el)},addOne:function(a){var b=new e({model:a,
_parent:this}),d=this._views.length;a.postview=b;b.order=parseFloat(a.get("Order"));if(d){var h,k;for(i=0;i<d;i++)if(b.order>this._views[i].order)h=this._views[i],nextIndex=i;else if(b.order<this._views[i].order){k=this._views[i];prevIndex=i;break}k?(b.el.insertAfter(k.el),this._views.splice(prevIndex,0,b)):h&&(b.el.insertBefore(h.el),this._views.splice(nextIndex+1,0,b))}else this.el.find("#load-more").after(b.el),this._views=[b];return b},toggleStatusCount:function(){if(0!==this.pendingAutoupdates.length){var a=
this.pendingAutoupdates.length;b("#liveblog-status-count",this.el).text(ngettext("one new post","%(count)s new posts",a).format({count:a})).show()}else b("#liveblog-status-count",this.el).hide()},removeAllAutoupdate:function(a,b){for(var d=0,e=b.length;d<e;d++)b[d].postview&&b[d].postview.remove();this.markScroll()},addAllAutoupdate:function(a,b){if(this.autoRender){if(b.length){for(var d=0,e=b.length;d<e;d++)this.addOne(b[d]),this.model.get("PostPublished").total++;this.markScroll()}}else 0!==b.length&&
(this.pendingAutoupdates=this.pendingAutoupdates.concat(b),this.toggleStatusCount())},addAllPending:function(){if(!this.flags.addAllPending&&this.pendingAutoupdates.length){this.flags.addAllPending=!0;for(var a=0,b=this.pendingAutoupdates.length;a<b;a++)this.addOne(this.pendingAutoupdates[a]);this.pendingAutoupdates=[];this.toggleStatusCount();this.markScroll()}this.flags.addAllPending=!1},addAll:function(a,b){var d;d=0;for(count=b.length;d<count;d++)this.addOne(b[d]);this.toggleMoreVisibility()},
updateingStatus:function(){this.el.find("#liveblog-status-time").html(_("updating..."))},updateStatus:function(){var a=new Date;this.el.find("#liveblog-status").fadeOut(function(){b(this).find("#liveblog-status-time").attr("time",a.format()).text(_("updated on %s").format(a.format(_("HH:MM:ss")))).end().fadeIn()})},renderBlog:function(){},toggleMoreVisibility:function(){this.model.get("PostPublished")._stats.offset>=this.model.get("PostPublished")._stats.total?b("#loading-more",this.el).hide():b("#loading-more",
this.el).show()},markScroll:function(){this.scroll.element=b("#liveblog-posts li:not(#load-more)",this.el).first();this.scroll.start=this.scroll.element.offset().top},render:function(){var a=this,c,d;d=a.model.get("PostPublished");a.el.tmpl("theme/container");a.renderBlog();a.ensureStatus();c=d._list;d.total=d.listTotal;a.toggleMoreVisibility();var e=c.length;a.views=[];a.renderedTotal=e;for(var e=0,k=c.length;e<k;e++)c[e].on("rendered",a.renderedOn,a),d=a.addOne(c[e]),a.views.push(d);a.model.get("PostPublished").triggerHandler("rendered");
b("#pintotop,#liveblog-status-count",a.el).on(a.getEvent("click"),function(c){c.preventDefault();b("#liveblog-posts",a.el).scrollTop(0)});a.markScroll();b("#liveblog-posts",a.el).scroll(function(){!a.flags.atEnd&&b(this).outerHeight()===b(this).get(0).scrollHeight-b(this).scrollTop()&&a.more();a.scroll.element.offset().top<a.scroll.start?(a.autoRender=!1,b("#liveblog-status",a.el).addClass("shadow")):(a.autoRender=!0,a.addAllPending(),b("#liveblog-status",a.el).removeClass("shadow"))})},renderedOn:function(){this.renderedTotal--;
this.renderedTotal||this.closeAllButFirstWrapup()},closeAllButFirstWrapup:function(a){a=this.views;a.reverse();for(var c=0;c<a.length;c++)b(a[c].el).hasClass("wrapup")&&a[c]._toggleWrap(b(a[c].el))}})});